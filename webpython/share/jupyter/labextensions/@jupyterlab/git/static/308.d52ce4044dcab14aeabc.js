(self.webpackChunk_jupyterlab_git=self.webpackChunk_jupyterlab_git||[]).push([[308],{5318:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},3343:(e,t,i)=>{"use strict";var s=i(5318);t.Z=void 0;var r=s(i(4938)),n=i(5893),o=(0,r.default)((0,n.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.Z=o},4938:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s.createSvgIcon}});var s=i(4040)},7266:(e,t,i)=>{var s="undefined"!=typeof JSON?JSON:i(8418);e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var i=t.space||"";"number"==typeof i&&(i=Array(i+1).join(" "));var o,l="boolean"==typeof t.cycles&&t.cycles,a=t.replacer||function(e,t){return t},d=t.cmp&&(o=t.cmp,function(e){return function(t,i){var s={key:t,value:e[t]},r={key:i,value:e[i]};return o(s,r)}}),c=[];return function e(t,o,h,u){var f=i?"\n"+new Array(u+1).join(i):"",m=i?": ":":";if(h&&h.toJSON&&"function"==typeof h.toJSON&&(h=h.toJSON()),void 0!==(h=a.call(t,o,h))){if("object"!=typeof h||null===h)return s.stringify(h);if(r(h)){for(var p=[],g=0;g<h.length;g++){var y=e(h,g,h[g],u+1)||s.stringify(null);p.push(f+i+y)}return"["+p.join(",")+f+"]"}if(-1!==c.indexOf(h)){if(l)return s.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}c.push(h);var _=n(h).sort(d&&d(h));for(p=[],g=0;g<_.length;g++){var w=e(h,o=_[g],h[o],u+1);if(w){var b=s.stringify(o)+m+w;p.push(f+i+b)}}return c.splice(c.indexOf(h),1),"{"+p.join(",")+f+"}"}}({"":e},"",e,0)};var r=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},n=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},i=[];for(var s in e)t.call(e,s)&&i.push(s);return i}},8418:(e,t,i)=>{t.parse=i(1396),t.stringify=i(6177)},1396:e=>{var t,i,s,r,n={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},o=function(e){throw{name:"SyntaxError",message:e,at:t,text:s}},l=function(e){return e&&e!==i&&o("Expected '"+e+"' instead of '"+i+"'"),i=s.charAt(t),t+=1,i},a=function(){var e,t="";for("-"===i&&(t="-",l("-"));i>="0"&&i<="9";)t+=i,l();if("."===i)for(t+=".";l()&&i>="0"&&i<="9";)t+=i;if("e"===i||"E"===i)for(t+=i,l(),"-"!==i&&"+"!==i||(t+=i,l());i>="0"&&i<="9";)t+=i,l();if(e=+t,isFinite(e))return e;o("Bad number")},d=function(){var e,t,s,r="";if('"'===i)for(;l();){if('"'===i)return l(),r;if("\\"===i)if(l(),"u"===i){for(s=0,t=0;t<4&&(e=parseInt(l(),16),isFinite(e));t+=1)s=16*s+e;r+=String.fromCharCode(s)}else{if("string"!=typeof n[i])break;r+=n[i]}else r+=i}o("Bad string")},c=function(){for(;i&&i<=" ";)l()};r=function(){switch(c(),i){case"{":return function(){var e,t={};if("{"===i){if(l("{"),c(),"}"===i)return l("}"),t;for(;i;){if(e=d(),c(),l(":"),Object.hasOwnProperty.call(t,e)&&o('Duplicate key "'+e+'"'),t[e]=r(),c(),"}"===i)return l("}"),t;l(","),c()}}o("Bad object")}();case"[":return function(){var e=[];if("["===i){if(l("["),c(),"]"===i)return l("]"),e;for(;i;){if(e.push(r()),c(),"]"===i)return l("]"),e;l(","),c()}}o("Bad array")}();case'"':return d();case"-":return a();default:return i>="0"&&i<="9"?a():function(){switch(i){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null}o("Unexpected '"+i+"'")}()}},e.exports=function(e,n){var l;return s=e,t=0,i=" ",l=r(),c(),i&&o("Syntax error"),"function"==typeof n?function e(t,i){var s,r,o=t[i];if(o&&"object"==typeof o)for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(void 0!==(r=e(o,s))?o[s]=r:delete o[s]);return n.call(t,i,o)}({"":l},""):l}},6177:e=>{var t,i,s,r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function o(e){return r.lastIndex=0,r.test(e)?'"'+e.replace(r,(function(e){var t=n[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function l(e,r){var n,a,d,c,h,u=t,f=r[e];switch(f&&"object"==typeof f&&"function"==typeof f.toJSON&&(f=f.toJSON(e)),"function"==typeof s&&(f=s.call(r,e,f)),typeof f){case"string":return o(f);case"number":return isFinite(f)?String(f):"null";case"boolean":case"null":return String(f);case"object":if(!f)return"null";if(t+=i,h=[],"[object Array]"===Object.prototype.toString.apply(f)){for(c=f.length,n=0;n<c;n+=1)h[n]=l(n,f)||"null";return d=0===h.length?"[]":t?"[\n"+t+h.join(",\n"+t)+"\n"+u+"]":"["+h.join(",")+"]",t=u,d}if(s&&"object"==typeof s)for(c=s.length,n=0;n<c;n+=1)"string"==typeof(a=s[n])&&(d=l(a,f))&&h.push(o(a)+(t?": ":":")+d);else for(a in f)Object.prototype.hasOwnProperty.call(f,a)&&(d=l(a,f))&&h.push(o(a)+(t?": ":":")+d);return d=0===h.length?"{}":t?"{\n"+t+h.join(",\n"+t)+"\n"+u+"}":"{"+h.join(",")+"}",t=u,d}}e.exports=function(e,r,n){var o;if(t="",i="","number"==typeof n)for(o=0;o<n;o+=1)i+=" ";else"string"==typeof n&&(i=n);if(s=r,r&&"function"!=typeof r&&("object"!=typeof r||"number"!=typeof r.length))throw new Error("JSON.stringify");return l("",{"":e})}},4850:(e,t,i)=>{"use strict";i.d(t,{oy:()=>o,mn:()=>a,Nt:()=>l,Ff:()=>g});var s=i(8439);class r{constructor(e,t,i,s,r){this.baseFrom=e,this.baseTo=t,this.remoteFrom=i,this.remoteTo=s,this.sources=r?[r]:[]}inEdit(e){return e>=this.baseFrom&&e<=this.baseTo}inOrig(e){return e>=this.remoteFrom&&e<=this.remoteTo}}class n{constructor(){this._currentGhost=null,this.chunks=[],this.editOffset=0}_getCurrent(){return this._currentGhost?(this._currentGhost=null,null):this.chunks.length>0?this.chunks[this.chunks.length-1]:null}_overlapChunk(e,t,i){return i?e.inOrig(t.from.line):e.inEdit(t.from.line)}addDiff(e,t){let i=e.to.line-e.from.line;e.endsOnNewline&&(i+=1);const n=0===e.from.column&&i>0,o=e.chunkStartLine?0:1,l=e.chunkStartLine&&e.endsOnNewline&&n?0:1;let a=this._getCurrent();if(a&&(t?this._overlapChunk(a,e,t)?(a.remoteTo=Math.max(a.remoteTo,e.from.line+l+i),a.baseTo=Math.max(a.baseTo,e.from.line+l+this.editOffset),e.source&&!(0,s.Bo)(e.source,a.sources)&&a.sources.push(e.source)):a=null:this._overlapChunk(a,e,t)?(a.remoteTo=Math.max(a.remoteTo,e.from.line+l-this.editOffset),a.baseTo=Math.max(a.baseTo,e.from.line+l+i),e.source&&!(0,s.Bo)(e.source,a.sources)&&a.sources.push(e.source)):a=null),!a){if(t){let t=e.from.line,s=t+this.editOffset;a=new r(s+o,s+l,t+o,t+l+i)}else{let t=e.from.line,s=t-this.editOffset;a=new r(t+o,t+l+i,s+o,s+l)}e.source&&a.sources.push(e.source),this.chunks.push(a)}a.sources=a.sources.filter(s.Tw),this.editOffset+=t?-i:i}addGhost(e,t,i){let n=e.to.line-e.from.line;e.endsOnNewline&&(n+=1);let o=0===e.from.column&&n>0,l=e.chunkStartLine?0:1,a=e.chunkStartLine&&e.endsOnNewline&&o?0:1;t||(a+=n);let d=this._currentGhost,c=e.from.line+(t?i:0);if(d){let t=c-this.editOffset;d.baseTo>c?(d.remoteTo=Math.max(d.remoteTo,t+a),d.baseTo=Math.max(d.baseTo,c+a),e.source&&!(0,s.Bo)(e.source,d.sources)&&d.sources.push(e.source)):d=null}if(!d){let t=c-this.editOffset;d=new r(c+l,c+a,t+l,t+a),e.source&&d.sources.push(e.source),this.chunks.push(d)}this._currentGhost=d,d.sources=d.sources.filter(s.Tw)}}class o extends n{_overlapChunk(e,t,i){let s=t.from.line;return(e.baseFrom!==e.baseTo||e.remoteFrom>=e.remoteTo)&&(s+=1),i?e.inOrig(s):e.inEdit(s)}}function l(e){let t=null,i=[];for(let r of e)null===t?t=(0,s.DC)(r):t.inEdit(r.baseFrom)?(t.remoteTo=Math.max(t.remoteTo,r.remoteTo),t.baseTo=Math.max(t.baseTo,r.baseTo),t.sources=t.sources.concat(r.sources)):(i.push(t),t=(0,s.DC)(r)),t.sources=t.sources.filter(s.Tw);return null!==t&&i.push(t),i}function a(e,t){if(e)for(let i of e)i.source=t,"patch"===i.op&&a(i.diff,t);return e}var d=i(4632),c=i(1604);function h(e){for(let t of e)if((0,s.bd)(t))return!0;return!1}function u(e){let t=[];for(let i of e){let e,s=i.key;t.push(s),"addrange"===i.op||("removerange"===i.op?(e=s+i.length,t.push(e)):"patch"===i.op&&(e=s+1,t.push(e)))}return t.filter(s.Tw)}function f(e,t){let i=[];if(!Array.isArray(t))throw new Error;let r=0;for(let n of e)if((0,s.Bo)(n.op,["addrange","patch"]))i.push(n);else{if("removerange"!==n.op)throw new Error("Unhandled diff entry op "+n.op);for(;t[r]<n.key;)r+=1;if(t[r]!==n.key)throw new Error;for(;r<t.length-1&&t[r+1]<=n.key+n.length;)i.push((0,d.Sn)(t[r],t[r+1]-t[r])),r+=1}return i}function m(e,t){let i=[0,e.length];for(let e of t)if((0,s.bd)(e)){let t=u(e);i=i.concat(t)}i=i.filter(s.Tw).sort();let r=[];for(let e of t)(0,s.bd)(e)?r.push(f(e,i)):r.push(e);let n=function(e,t){let i=Array.apply(null,Array(t.length)).map(Number.prototype.valueOf,0),s=[];for(let r=0;r<e.length;++r){let n=e[r],o=r<e.length-1?e[r+1]:n,l=[];for(let e=0;e<t.length;++e){let s=t[e],r=[];for(;s&&i[e]<s.length&&s[i[e]].key===n;)r.push(s[i[e]]),i[e]+=1;l.push(r)}if(h(l)){let e={baseStart:n,baseEnd:o,diffs:l};s.push(e)}}return s}(i,r);return n}function p(e,t,i){if(i.length<2)return[t];let r=[];for(let n of i){let i=t.customDiff;(0,s.bd)(i)&&(t.localPath.length>0&&(i=(0,c.hJ)(i,t.localPath)),i=f(i,[0,e.length,n.baseStart,n.baseEnd].filter(s.Tw).sort())),r.push(new c.DM(t.absolutePath.slice(),n.diffs[0],n.diffs[1],t.action,t.conflict))}return r}function g(e,t){let i=[];for(let s of t){let t=m(e,[(0,c._M)(e,[s],"local"),(0,c._M)(e,[s],"remote")]);i=i.concat(p(e,s,t))}return i}},8566:(e,t,i)=>{"use strict";i.d(t,{L:()=>o,k:()=>n});var s=i(9053),r=i(8778);class n extends r.Panel{constructor({model:e,editorFactory:t,translator:i,...r}){super(),this._editorFactory=t,this._model=e,this._translator=i??s.nullTranslator,this._viewOptions=r}}class o extends n{}},3788:(e,t,i)=>{"use strict";i.d(t,{m:()=>d});var s=i(8778);const r="jp-CollapsiblePanel-header-icon",n="jp-CollapsiblePanel-header-icon-opened",o="jp-CollapsiblePanel-header-icon-closed",l="jp-CollapsiblePanel-opened",a="jp-CollapsiblePanel-closed";class d extends s.Panel{static createHeader(e){let t=new s.Panel;t.addClass("jp-CollapsiblePanel-header"),e&&(t.node.textContent=e);let i=document.createElement("button");return i.className=r,t.node.appendChild(i),t}constructor(e,t,i){super(),this.addClass("jp-CollapsiblePanel"),this.inner=e;let c=d.createHeader(t);this.header=c,this.button=c.node.getElementsByClassName(r)[0],c.node.onclick=this.toggleCollapsed.bind(this),this.addWidget(c),this.container=new s.Panel,this.container.addClass("jp-CollapsiblePanel-container"),this.slider=new s.Panel,this.slider.addClass("jp-CollapsiblePanel-slider"),this.slider.addWidget(e),this.container.addWidget(this.slider),this.addWidget(this.container),this.slider.addClass(!0===i?a:l),this.button.classList.add(!0===i?o:n),this.button.classList.add("fa"),this.button.classList.add(!0===i?"fa-caret-down":"fa-caret-up")}toggleCollapsed(){let e=this.slider,t=this.button;this.collapsed?(e.removeClass(a),e.addClass(l),t.classList.remove(o),t.classList.add(n),this.button.classList.remove("fa-caret-down"),this.button.classList.add("fa-caret-up")):(e.removeClass(l),e.addClass(a),t.classList.remove(n),t.classList.add(o),this.button.classList.remove("fa-caret-up"),this.button.classList.add("fa-caret-down"))}get collapsed(){return this.slider.hasClass(a)}set headerTitle(e){this.header.node.innerText=e}}},1156:(e,t,i)=>{"use strict";i.d(t,{c:()=>s});class s extends Error{constructor(e,t="error"){super(e),Object.setPrototypeOf(this,s.prototype),this.message=e,this.stack=(new Error).stack,this.severity=t}}},1770:(e,t,i)=>{"use strict";i.d(t,{QK:()=>se,LI:()=>Z});var s=i(8204),r=i(6211),n=i(9053),o=i(8778),l=i(9073),a=i(8799),d=i(4850),c=i(1373),h=i(8093),u=i(7807),f=i(7454);class m extends u.CodeEditorWrapper{constructor(e){const{factory:t,value:i,...s}=e,r=new h.YFile;i&&(r.source=i),super({model:new u.CodeEditor.Model({sharedModel:r}),factory:t??_(),editorOptions:s}),this.staticLoaded=!1}get cm(){return this.editor.editor}get doc(){return this.editor.doc}}function p(e){const t=new f.EditorExtensionRegistry,i=["lineNumbers","readOnly","theme","allowMultipleSelections","tabSize"];for(const s of f.EditorExtensionRegistry.getDefaultExtensions({themes:e}))for(const e of i)s.name===e&&t.addExtension(s);return t.addExtension({name:"shared-model-binding",factory:e=>{const t=e.model.sharedModel;return f.EditorExtensionRegistry.createImmutableExtension((0,f.ybinding)({ytext:t.ysource,undoManager:t.undoManager??void 0}))}}),t}function g(){const e=new f.EditorLanguageRegistry;for(const t of f.EditorLanguageRegistry.getDefaultLanguages())e.addLanguage(t);return e.addLanguage({name:"ipythongfm",mime:"text/x-ipythongfm",load:async()=>{const[t,s]=await Promise.all([Promise.all([i.e(638),i.e(798)]).then(i.bind(i,8638)),i.e(10).then(i.bind(i,8010))]);return t.markdown({base:t.markdownLanguage,codeLanguages:t=>e.findBest(t),extensions:[(0,f.parseMathIPython)(c.StreamLanguage.define(s.stexMath).parser)]})}}),e}function y(){const e=new f.EditorThemeRegistry;for(const t of f.EditorThemeRegistry.getDefaultThemes())e.addTheme(t);return e}function _(e={}){const t=new f.CodeMirrorEditorFactory({extensions:e.extensions??p(y()),languages:e.languages??g(),translator:e.translator??n.nullTranslator});return t.newInlineEditor.bind(t)}var w,b,v=i(8439);!function(e){e[e.DIFF_DELETE=-1]="DIFF_DELETE",e[e.DIFF_INSERT=1]="DIFF_INSERT",e[e.DIFF_EQUAL=0]="DIFF_EQUAL"}(w||(w={})),function(e){e[e.INCOMING=0]="INCOMING",e[e.OUTGOING=1]="OUTGOING"}(b||(b={}));const D="jp-Merge-gutter-picker",C="jp-Merge-gutter-conflict",k=r.Decoration.line({class:"jp-Merge-conflict"}),E=["chunk","conflict","start","end"];var x;!function(e){e.buildEditorDecorationDict=function(e,t){const i=t?"-"+t:"",s="cm-merge-"+e;return{chunk:r.Decoration.line({class:s+"-chunk"+i}),start:r.Decoration.line({class:s+"-chunk-start"+i}),end:r.Decoration.line({class:s+"-chunk-end"+i}),endEmpty:r.Decoration.line({class:s+"-chunk-end"+i+"-empty"}),conflict:k,inserted:r.Decoration.mark({class:s+"-inserted"}),deleted:r.Decoration.mark({class:s+"-deleted"})}}}(x||(x={}));const O={left:x.buildEditorDecorationDict("l"),right:x.buildEditorDecorationDict("r"),localMerge:x.buildEditorDecorationDict("m","local"),remoteMerge:x.buildEditorDecorationDict("m","remote"),customMerge:x.buildEditorDecorationDict("m","custom"),eitherMerge:x.buildEditorDecorationDict("m","either"),mixedMerge:x.buildEditorDecorationDict("m","mixed")},T=r.EditorView.baseTheme({".cm-collapsedLines":{cursor:"pointer",color:"var(--jp-ui-font-color1)",backgroundColor:"var(--jp-layout-color2)",border:"var(--jp-border-width) solid var(--jp-border-color1)",fontSize:"90%",padding:"0 3px",borderRadius:"4px"}});function M(e=!0){const t=[T,I,A];return e?[...t,V,U,q]:t}function S({from:e,to:t},i){return{from:i.mapPos(e),to:i.mapPos(t)}}const W=s.StateEffect.define({map:S}),j=s.StateEffect.define({map:S}),I=s.StateField.define({create:()=>r.Decoration.none,update(e,t){e=e.map(t.changes);for(let i of t.effects){let t;i.is(W)&&(t=O[i.value.decorationKey][i.value.highlightType],e=e.update({add:[t.range(i.value.from,i.value.to)]})),i.is(j)&&(t=O[i.value.decorationKey][i.value.highlightType],e=e.update({filter:(e,i,s)=>t.spec.class!==s.spec.class}))}return e},provide:e=>r.EditorView.decorations.from(e)}),P=s.StateEffect.define({map:(e,t)=>e.map(t)}),A=s.StateField.define({create:()=>r.Decoration.none,update:(e,t)=>{for(let e of t.effects)if(e.is(P))return e.value;return e.map(t.changes)},provide:e=>r.EditorView.decorations.from(e)});class F extends r.WidgetType{constructor(e){super(),this.size=e}toDOM(){let e=document.createElement("div");return e.className="cm-merge-spacer",e.style.height=this.size+"px",e.style.minWidth="1px",e}}const L=s.StateEffect.define({map:(e,t)=>({from:t.mapPos(e.from),block:e.block,on:e.on,type:e.type})}),N=s.StateEffect.define({map:e=>({type:e.type})});class B extends r.GutterMarker{constructor(e){super(),this.symbol=e.symbol,this.className=e.className,this.block=e.block}toDOM(){let e=re("div",this.symbol);return e.className=this.className,e}eq(e){return e===this}}const V=s.StateField.define({create:()=>s.RangeSet.empty,update:(e,t)=>{e=e.map(t.changes);for(let i of t.effects){if(i.is(L)&&i.value.on){const t="picker"===i.value.type?i.value.block?R:z:i.value.block?G:H;let s=!1;e.between(i.value.from,i.value.from,((e,r,n)=>{if(e===i.value.from&&n.eq(t))return s=!0,!1})),s||(e=e.update({add:[t.range(i.value.from)]}))}i.is(N)&&(e=s.RangeSet.empty)}return e}}),z=new B({symbol:"➭︎",className:D,block:!1}),R=new B({symbol:"➭︎",className:D,block:!0}),H=new B({symbol:"⚠︎",className:C,block:!1}),G=new B({symbol:"⚠︎",className:C,block:!0}),J=s.StateEffect.define({map:(e,t)=>({line:t.mapPos(e.line),chunk:e.chunk,type:e.type})}),K=s.StateEffect.define({map:e=>({type:e.type})}),U=s.StateField.define({create:()=>new Map,update:(e,t)=>{let i=e;for(let e of t.effects)e.is(J)&&"picker"===e.value.type&&i.set(e.value.line,e.value.chunk);return i}}),q=s.StateField.define({create:()=>new Map,update:(e,t)=>{let i=e;for(let e of t.effects)e.is(J)&&"conflict"===e.value.type&&i.set(e.value.line,e.value.chunk);return i}}),$=s.StateEffect.define({map:(e,t)=>t.mapPos(e)}),X=s.StateEffect.define({map:(e,t)=>e.map(t)});class Q extends r.WidgetType{constructor(e,t){super(),this.lines=e,this.siblings=t}eq(e){return this.lines==e.lines&&this.siblings.every((t=>e.siblings.findIndex((e=>e.line==t.line&&e.cm==t.cm))>=0))}toDOM(e){let t=document.createElement("div");return t.className="cm-collapsedLines",t.textContent=e.state.phrase("(…$ unchanged lines…)",this.lines),t.addEventListener("click",(t=>{const i=e.posAtDOM(t.target);this.siblings.forEach((t=>{if(t.cm===e)e.dispatch({effects:$.of(i)});else{const e=t.cm.state.doc.line(t.line).from;t.cm.dispatch({effects:$.of(e)})}}))})),t}ignoreEvent(e){return e instanceof MouseEvent}get estimatedHeight(){return 27}}const Y=s.StateField.define({create:e=>r.Decoration.none,update(e,t){for(let e of t.effects)if(e.is(X))return e.value;e=e.map(t.changes);for(let i of t.effects)i.is($)&&(e=e.update({filter:e=>e!=i.value}));return e},provide:e=>r.EditorView.decorations.from(e)});function Z(e){const{remote:t,local:i,merged:s,readOnly:r,factory:n,collapseIdentical:o,showBase:l,translator:a}=e;let d={remote:t,local:i,merged:s,config:{readOnly:r},factory:n??_(),collapseIdentical:o,showBase:l,translator:a},c=new se(d),h=[];c.left&&h.push(c.left),c.right&&h.push(c.right),c.merge&&h.push(c.merge);let u=(t||s).mimetype;if(u){for(let e of h)e.remoteEditorWidget.model.mimeType=u;c.base.model.mimeType=u}return c}class ee{constructor({model:e,type:t,options:i,lockScroll:s,translator:r}){this._model=e,this._trans=(r??n.nullTranslator).load("nbdime"),this._type=t,this._lockScroll=s??!0;let o=this._model.remote||"";this._remoteEditorWidget=new m({...i,value:o}),this.setScrollLock(this._lockScroll)}init(e){this._baseEditorWidget=e,this._lineChunks=this._model.getLineChunks(),this._chunks=(0,d.Nt)(this._lineChunks),this.updateView(),this.syncScroll()}updateView(){const e=this._baseEditorWidget.cm,t=this._remoteEditorWidget.cm;this.clearHighlighting(t,this._model.additions,this._chunks,w.DIFF_INSERT),this.clearHighlighting(e,this._model.deletions,this._chunks,w.DIFF_DELETE),this.updateHighlighting(t,this._model.additions,this._chunks,w.DIFF_INSERT),this.updateHighlighting(e,this._model.deletions,this._chunks,w.DIFF_DELETE)}syncModel(){if(!this.modelInvalid())return;let e=this.remoteEditorWidget.cm,t=this._model.getLineChunks(),i=(0,d.Nt)(t);if(this._model.remote===e.state.doc.toString())return this._lineChunks=t,void(this._chunks=i);let s=e.state.selection.main.head,r=(0,v.uq)(this._model.remote);e.dispatch({changes:{from:0,to:e.state.doc.length,insert:r.slice(0,r.length).join("")}},{selection:{anchor:s}}),this._lineChunks=t,this._chunks=i}buildGap(){let e=this._lockButton=re("div",void 0,"cm-merge-scrolllock");e.title=this._trans.__("Toggle locked scrolling"),this.setScrollLock(this._lockScroll),e.addEventListener("click",(e=>{this.setScrollLock(!this._lockScroll)}));let t=re("div",[e],"cm-merge-gap");return this._gap=t,this._gap}setScrollLock(e){this._lockScroll=e,this._lockButton&&(this._lockButton.innerHTML=e?"⇛⇚":"⇛&nbsp;&nbsp;⇚"),window.requestAnimationFrame((()=>{this._remoteEditorWidget.cm.scrollDOM.scrollLeft=this._baseEditorWidget.cm.scrollDOM.scrollLeft,this._remoteEditorWidget.cm.scrollDOM.scrollTop=this._baseEditorWidget.cm.scrollDOM.scrollTop}))}modelInvalid(){return this._model instanceof l.M8&&this._model.invalid}syncScroll(){if(this.modelInvalid())return;const e=this._baseEditorWidget.cm.scrollDOM,t=this._remoteEditorWidget.cm.scrollDOM;e.addEventListener("scroll",(i=>{this._lockScroll&&window.requestAnimationFrame((function(){t.scrollLeft=e.scrollLeft,t.scrollTop=e.scrollTop}))}),{passive:!0}),t.addEventListener("scroll",(i=>{this._lockScroll&&window.requestAnimationFrame((function(){e.scrollLeft=t.scrollLeft,e.scrollTop=t.scrollTop}))}),{passive:!0})}getDecorationKey(e){let t=this._type,i=t;if("merge"===this._type&&(t=e[0].action,i=t+"Merge",e.length>1))for(let s of e.slice(1))if(s.action!==t){i="mixedMerge";break}return i}getConflictState(e){let t=!1;if(e.length>0)for(let i of e)if(i.decision.conflict){t=!0;break}return t}createGutterEffects(e,t,i,s,r=!1){let n=[],o=L.of({from:i,on:!0,type:s,block:r});return n.push(o),n.push(J.of({line:(0,a.sg)(e.state.doc,i).line,chunk:t,type:s})),n}buildLineEffects(e,t){let i=[],s=e===this._baseEditorWidget.cm;for(let r of t){let t,n,o=this.getDecorationKey(r.sources),l=this.getConflictState(r.sources);s?(t=r.baseFrom,n=r.baseTo):(t=r.remoteFrom,n=r.remoteTo);for(let s=t;s<n;s++){let d={line:s,column:0},c=(0,a.RL)(e.state.doc,d);if(i.push(W.of({from:c,to:c,highlightType:"chunk",decorationKey:o})),l&&i.push(W.of({from:c,to:c,highlightType:"conflict",decorationKey:o})),s===t)if(i.push(W.of({from:c,to:c,highlightType:"start",decorationKey:o})),o.includes("Merge"))if(e===this._baseEditorWidget.cm)for(let t of r.sources)"custom"!==t.decision.action||(0,v.bd)(t.decision.localDiff)||(0,v.bd)(t.decision.remoteDiff)||(i=i.concat(this.createGutterEffects(e,r,c,"picker")));else l&&e===this.remoteEditorWidget.cm&&(i=i.concat(this.createGutterEffects(e,r,c,"conflict")));else i=i.concat(this.createGutterEffects(e,r,c,"picker"));s===n-1&&i.push(W.of({from:c,to:c,highlightType:"end",decorationKey:o}))}if(t===n){const s=(0,a.RL)(e.state.doc,{line:t,column:0});i.push(W.of({from:s,to:s,highlightType:"endEmpty",decorationKey:o})),o.includes("Merge")?l&&(i=i.concat(this.createGutterEffects(e,r,s,"conflict",!0))):i=i.concat(this.createGutterEffects(e,r,s,"picker",!0))}}return i}clearLineEffects(e,t){let i=[];for(let e of t){let t=e.sources,s=this.getDecorationKey(t);for(let e of E)i.push(j.of({highlightType:e,decorationKey:s}))}return e!==this._baseEditorWidget.cm&&(i.push(N.of({type:"all"})),i.push(K.of({type:"picker"})),i.push(K.of({type:"conflict"}))),i}buildCharacterHighlighting(e,t,i){const s=[],r=[];if(i===w.DIFF_INSERT||i===w.DIFF_DELETE){const n=i===w.DIFF_DELETE?"deleted":"inserted";for(let i of t){void 0!==i.source&&r.push(i.source);const t=(0,a.RL)(e.state.doc,{line:i.from.line,column:i.from.column}),o=(0,a.RL)(e.state.doc,{line:i.to.line,column:i.to.column});s.push(W.of({from:t,to:o,highlightType:n,decorationKey:this.getDecorationKey(r)}))}}return s}clearCharacterHighlighting(e,t,i){let s=[],r=[];if(i===w.DIFF_INSERT||i===w.DIFF_DELETE){let e=i===w.DIFF_DELETE?"deleted":"inserted";for(let i of t){void 0!==i.source&&r.push(i.source);let t=this.getDecorationKey(r);s.push(j.of({highlightType:e,decorationKey:t}))}}return s}updateHighlighting(e,t,i,s){const r=this.buildLineEffects(e,i),n=this.buildCharacterHighlighting(e,t,s),o=r.concat(n);e.dispatch({effects:o})}clearHighlighting(e,t,i,s){const r=this.clearLineEffects(e,i),n=this.clearCharacterHighlighting(e,t,s),o=r.concat(n);e.dispatch({effects:o})}get remoteEditorWidget(){return this._remoteEditorWidget}get baseEditorWidget(){return this._baseEditorWidget}get chunks(){return this._chunks}get lineChunks(){return this._lineChunks}get model(){return this._model}}function te(e,t){let i=0;for(let s=0;s<t.length;s++){let r=t[s];if(r.baseTo>e&&r.baseFrom<=e)return 0;if(r.baseFrom>e)break;i=r.remoteTo-r.baseTo}return e+i}function ie(e,t){const i=e.baseFrom;let s=t[t.length-1];for(let e=0;e<t.length;++e){const r=t[e];if(r.baseFrom===i)return r.remoteTo;if(r.baseFrom>i){s=t[e-1];break}}return e.baseTo+(s?s.remoteTo-s.baseTo:0)}class se extends o.Panel{constructor(e){super(),this._collapseIdentical=2,this._showBase=!0,this._measuring=-1,this._trans=(e.translator??n.nullTranslator).load("nbdime");let t=e.remote,i=e.local||null,l=e.merged||null,a=this._left=null,d=this._right=null,c=this._merge=null;void 0!==e.collapseIdentical&&(this._collapseIdentical="number"==typeof e.collapseIdentical?Math.max(-1,e.collapseIdentical):e.collapseIdentical?2:-1);let h=0,u=e.remote||e.merged;if(!u)throw new Error("Either remote or merged model needs to be specified!");const f=null!==u.base?u.base:u.remote??"";let p=e.config?.readOnly??!1;e.config={...e.config,lineNumbers:!1!==e.config?.lineNumbers,readOnly:!0},l&&(e.config.lineWrap=e.config.lineWrap??!1),this._aligning=!0;const g=r.EditorView.updateListener.of((e=>{this._measuring<0&&e.viewportChanged&&!e.transactions.some((e=>e.effects.some((e=>e.is(P)))))&&this.alignViews()})),y=[V,(0,r.gutter)({class:"cm-gutter",markers:e=>e.state.field(V).update({filter:(e,t,i)=>!i.block}),widgetMarker:(e,t,i)=>{if(!(t instanceof F))return null;const s=e.state.field(V).update({filter:(e,t,s)=>s.block&&i.from===e});if(s.size>1)throw Error("More than one block gutter widget matched");return 1===s.size?s.iter().value:null},initialSpacer:()=>z,domEventHandlers:{mouseup:(e,t,i)=>0===i.button&&(this.onGutterClick(e,t),!0)}})],_=!!l,w=_?[g,y,M(_)]:M(_);w.push(s.EditorState.phrases.of({"(…$ unchanged lines…)":this._trans.__("(…$ unchanged lines…)")}));const b=!l&&(t?.unchanged||t?.added||t?.deleted);if(this._collapseIdentical>=0&&!b&&w.push(Y),this._base=new m({...e,extensions:[e.extensions??[],w],value:f}),this.addClass("jp-Mergeview-root"),l){this.addClass("cm-merge-grid-panel");const v=this._showBase=!1!==e.showBase;let D,C;i&&null!==i.remote?(a=this._left=new ee({model:i,type:"left",options:{...e,config:{...e.config},extensions:[e.extensions??[],w]},lockScroll:v,translator:e.translator}),D=a.remoteEditorWidget):(a=this._left=null,D=new o.Widget({node:re("div",this._trans.__("Value missing"),"jp-mod-missing")})),this.addWidget(D),D.addClass("cm-merge-pane"),D.addClass("cm-merge-left-editor"),v&&(this.addWidget(this._base),this._base.addClass("cm-merge-pane"),this._base.addClass("cm-central-editor")),t&&null!==t.remote?(d=this._right=new ee({model:t,type:"right",options:{...e,config:{...e.config},extensions:[e.extensions??[],w]},lockScroll:v,translator:e.translator}),C=d.remoteEditorWidget):(d=this._right=null,C=new o.Widget({node:re("div",this._trans.__("Value missing"),"jp-mod-missing")})),this.addWidget(C),C.addClass("cm-merge-pane"),C.addClass("cm-merge-right-editor"),c=this._merge=new ee({model:l,type:"merge",options:{...e,config:{...e.config,readOnly:p},extensions:[e.extensions??[],w]},lockScroll:v,translator:e.translator});let k=c.remoteEditorWidget;if(v)this.addWidget(k);else{function E(e,t){e.addEventListener("scroll",(()=>{window.requestAnimationFrame((function(){t.scrollLeft=e.scrollLeft,t.scrollTop=e.scrollTop}))}),{passive:!0}),t.addEventListener("scroll",(()=>{window.requestAnimationFrame((function(){e.scrollLeft=t.scrollLeft,e.scrollTop=t.scrollTop}))}),{passive:!0})}this.insertWidget(1,k),this.left&&E(this.merge.remoteEditorWidget.cm.scrollDOM,this.left.remoteEditorWidget.cm.scrollDOM),this.right&&E(this.merge.remoteEditorWidget.cm.scrollDOM,this.right.remoteEditorWidget.cm.scrollDOM)}k.addClass("cm-merge-pane"),k.addClass("cm-merge-editor"),h=3+(v?1:0)}else if(t)if(t.unchanged||t.added||t.deleted)h=1,this.addWidget(this._base),t.unchanged?this._base.addClass("cm-merge-pane-unchanged"):t.added?this._base.addClass("cm-merge-pane-added"):t.deleted&&this._base.addClass("cm-merge-pane-deleted"),this._base.addClass("cm-merge-pane");else{h=2,this.addWidget(this._base),this._base.addClass("cm-merge-pane"),this._base.addClass("cm-diff-left-editor"),d=this._right=new ee({model:t,type:"right",options:{...e,config:{...e.config},extensions:[e.extensions??[],w]},translator:e.translator});let x=d.remoteEditorWidget;x.addClass("cm-merge-pane"),x.addClass("cm-diff-right-editor"),this.addWidget(new o.Widget({node:d.buildGap()})),this.addWidget(x)}this.addClass("cm-merge-"+h+"pane");for(let O of[a,d,c])O&&O.init(this._base);this._collapseIdentical>=0&&this.collapseIdenticalStretches(),this._aligning=!1,this._diffViews.length>0&&this.scheduleAlignViews()}alignViews(){const e=this._showBase?this._base.cm.defaultLineHeight:this._diffViews[0].remoteEditorWidget.cm.defaultLineHeight;if(this._aligning)return;this._aligning=!0;const t=function(e){let t=[],i=[],s=e[0],r=e.slice(1);for(let e=0;e<s.lineChunks.length;e++){let n=s.lineChunks[e],o=[n.baseTo,n.remoteTo];for(const e of r)o.push(ie(n,e.lineChunks));if(t.length>0&&t[t.length-1][0]===o[0]){let e=t[t.length-1];for(let t=0;t<o.length;++t)e[t]=Math.max(e[t],o[t])}else if(t.length>0){let e=t[t.length-1],s=o[0]-e[0];for(let t=1;t<o.length;++t)if(s!==o[t]-e[t]){s=null;break}if(null!==s){i.push(o[0]);continue}t.push(o)}else t.push(o)}for(let e=0;e<r.length;e++)for(let n=0;n<r[e].lineChunks.length;n++){let o=r[e].lineChunks[n],l=0;for(;l<t.length;l++){let e=t[l];if((0,v.Bo)(o.baseTo,i)){l=-1;break}if(e[0]>=o.baseTo)break}if(l>-1){let i=[o.baseTo,ie(o,s.lineChunks)];for(let t=0;t<r.length;t++)t===e?i.push(o.remoteTo):i.push(ie(o,r[t].lineChunks));if(t.length>l&&t[l][0]===o.baseTo){let e=t[l];for(let t=0;t<i.length;++t)e[t]=Math.max(e[t],i[t])}else t.splice(l,0,i)}}return t}(this._diffViews),i=[this.base.cm,...this._diffViews.map((e=>e.remoteEditorWidget.cm))],n=[];for(let e=0;e<i.length;e++)n.push(new s.RangeSetBuilder);const o=new Array(i.length).fill(0),l=i.map((e=>e.state.doc.lines));for(const s of t){const t=this._showBase?s.slice(0,3):s,d=Math.max(...t),c=t.map(((e,t)=>d-e-o[t])),h=this._showBase?Math.min(...c):Math.min(...c.slice(1));c.map((e=>e-h)).forEach(((s,d)=>{if(!this._showBase&&0===d)return;let c=t[d];if(s>0&&c<l[d]){o[d]+=s;const t=(0,a.RL)(i[d].state.doc,{line:c,column:0});n[d].add(t,t,r.Decoration.widget({widget:new F(s*e),block:!0,side:-1}))}}))}const d=l.map(((e,t)=>e+o[t])),c=Math.max(...d);d.slice(0,this._showBase?3:4).forEach(((t,s)=>{if(c>t){const l=i[s].state.doc.length,a=c-t;o[s]+=a,n[s].add(l,l,r.Decoration.widget({widget:new F(a*e),block:!0,side:1}))}}));for(let e=0;e<(this._showBase&&i.length>2?i.length-1:i.length);e++){if(0===e&&!this._showBase)continue;const t=n[e].finish();s.RangeSet.eq([t],[i[e].state.field(A)])||i[e].dispatch({effects:P.of(t)})}this._aligning=!1}scheduleAlignViews(){this._measuring<0&&(this._measuring=window.requestAnimationFrame((()=>{this._measuring=-1,this.alignViews()})))}getMergedValue(){if(!this.merge)throw new Error('No merged value; missing "merged" view');return this.merge.remoteEditorWidget.doc.toString()}collapseIdenticalStretches(){const e=this._collapseIdentical;if(e<0)return;const t=this.base.cm,i=new Array(t.state.doc.lines).fill(!0),n=[new s.RangeSetBuilder];this.left&&(n.push(new s.RangeSetBuilder),ne(this.left,e,i)),this.right&&(n.push(new s.RangeSetBuilder),ne(this.right,e,i)),this.merge&&(n.push(new s.RangeSetBuilder),ne(this.merge,e,i));for(let s=0;s<i.length;s++)if(i[s]){const o=s+1;let l=1;for(;s<i.length-1&&i[s+1];s++,l++);if(l>e){const e=[{line:o,cm:t}];this.left&&e.push({line:te(o,this.left.chunks),cm:this.left.remoteEditorWidget.cm}),this.right&&e.push({line:te(o,this.right.chunks),cm:this.right.remoteEditorWidget.cm}),this.merge&&e.push({line:te(o,this.merge.chunks),cm:this.merge.remoteEditorWidget.cm}),e.forEach(((t,i)=>{const s=t.cm.state.doc.line(t.line).from,o=t.cm.state.doc.line(t.line+l-1).to;n[i].add(s,o,r.Decoration.replace({widget:new Q(l,e),block:!0}))}))}}const o=[t,...this._diffViews.map((e=>e.remoteEditorWidget.cm))];n.forEach(((e,t)=>{const i=e.finish();o[t].dispatch({effects:X.of(i)})}))}onGutterClick(e,t){let i=[],s=t.from,r=(0,a.sg)(e.state.doc,s).line;if(e!=this.merge?.remoteEditorWidget.cm){let s=e.state.field(U).get(r);if(e!=this._base.cm)for(let e of s.sources)e.decision.action=e.action;else if(this.merge&&e===this._base.cm)for(let e of s.sources)e.decision.action="base";for(let e=s.sources.length-1;e>=0;--e){let t=s.sources[e];this.merge&&(0,v.bd)(t.decision.customDiff)&&(t.decision.customDiff=[])}s.sources.length,i.push(L.of({from:t.from,on:!1,type:"picker",block:!1}))}else{let t=e.state.field(q).get(r);for(let i of t.sources)e!==this._base.cm&&(i.decision.conflict=!1)}return e.dispatch({effects:i}),this.updateDiffModels(),this.updateDiffViews(),this.alignViews(),!0}updateDiffModels(){for(let e of this._diffViews)e.model instanceof l.M8&&e.model.invalidate(),e.syncModel()}updateDiffViews(){this.clearBaseEditorPickers();for(let e of this._diffViews)e.updateView()}clearBaseEditorPickers(){let e=[];e.push(N.of({type:"all"})),e.push(K.of({type:"picker"})),this._base.cm.dispatch({effects:e})}get left(){return this._left}get right(){return this._right}get merge(){return this._merge}get base(){return this._base}get _diffViews(){return[this.left,this.right,this.merge].filter((e=>null!==e))}}function re(e,t,i,s){let r=document.createElement(e);if(i&&(r.className=i),s&&(r.style.cssText=s),"string"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(let e=0;e<t.length;++e)r.appendChild(t[e]);return r}function ne(e,t,i){for(let s=0;s<e.chunks.length;s++){const r=e.chunks[s];for(let e=r.baseFrom-t;e<r.baseTo+t;e++){const t=e;t>=0&&t<i.length&&(i[t]=!1)}}}},8439:(e,t,i)=>{"use strict";function s(e,t){return t.indexOf(e)>=0}function r(e){return null!==e&&0!==e.length}function n(e){return e.match(/^.*(\r\n|\r|\n|$)/gm)}function o(e){if("object"!=typeof e){if(s(typeof e,["string","number","boolean"]))return e;throw new TypeError("Cannot deepcopy non-object")}if(null===e)return null;if(Array.isArray(e)){let t=e.length,i=new Array(t);for(let s=0;s<t;s++)i[s]=o(e[s]);return i}{let t=e,i={};void 0!==t.prototype&&(i.prototype=t.prototype);for(let s in e)i[s]=o(t[s]);return i}}function l(e){let t=Object.create(Object.getPrototypeOf(e));for(let i in e){let s=e[i];if(null!=s&&s.hasOwnProperty("constructor")&&s.constructor===Function)continue;let r=Object.getOwnPropertyDescriptor(e,i);r&&!r.get&&Object.defineProperty(t,i,r)}return t}function a(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}function d(e,t){if(null===e||null===t)return null;if(e===t)return e.slice();let i=0;for(;i<Math.min(e.length,t.length)&&e[i]===t[i];++i);return e.slice(0,i)}function c(e,t){if(e===t)return!0;if(null===e||0===e.length)return!0;if(null===t||e.length>t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}function h(e,t){return g(e,(function(e,i){let s=e[t],r=i[t];return s<r?-1:s>r?1:0}))}function u(e,t){if(t<1)return"";let i="",s=e.valueOf();for(;t>1;)1&t&&(i+=s),t>>=1,s+=s;return i+s}function f(e){let t=[];return e.reduce((function(e,i,s){return t[s]=e+i.length}),0),t}function m(e,t,i){return i.indexOf(e)===t}function p(e,t){let i=[];[e,t]=e.length>t.length?[e,t]:[t,e];for(let s of e)-1!==t.indexOf(s)&&i.push(s);return i}function g(e,t){let i=[];for(let t=0;t<e.length;++t)i.push({index:t,key:e[t]});i=i.sort(((e,i)=>t(e.key,i.key)||e.index-i.index));let s=new Array(e.length);for(let t=0;t<e.length;++t)s[t]=e[i[t].index];return s}function y(e,t){void 0===t&&(t=document.createElement("select"));for(let i of e){let e=document.createElement("option");e.text=i,t.appendChild(e)}return t}i.d(t,{Bo:()=>s,DC:()=>l,Ml:()=>c,Tw:()=>m,XV:()=>g,YC:()=>h,Yu:()=>d,bd:()=>r,cO:()=>a,eW:()=>f,jV:()=>p,p$:()=>o,uq:()=>n,yc:()=>u,zO:()=>y})},4632:(e,t,i)=>{"use strict";i.d(t,{Gz:()=>c,SG:()=>o,Sn:()=>l,Ui:()=>n,X9:()=>d,j5:()=>a,kQ:()=>r});var s=i(8439);function r(e,t){return{op:"replace",key:e,value:t}}function n(e){return{op:"remove",key:e}}function o(e,t){return{op:"addrange",key:e,valuelist:t}}function l(e,t){return{op:"removerange",key:e,length:t}}function a(e,t){return{op:"patch",key:e,diff:t}}function d(e,t){if("number"!=typeof t.key)throw console.warn("Invalid patch details",e,t),new TypeError(`Invalid patch sequence op: Key is not a number: ${t.key}`);let i=t.key;if("addrange"===t.op){if(i<0||i>e.length||isNaN(i))throw new RangeError("Invalid add range diff op: Key out of range: "+i)}else if("removerange"===t.op){if(i<0||i>=e.length||isNaN(i))throw new RangeError("Invalid remove range diff op: Key out of range: "+i);if(i+t.length>e.length||isNaN(i))throw new RangeError("Invalid remove range diff op: Range too long!")}else{if("patch"!==t.op)throw new Error("Invalid op: "+t.op);if(i<0||i>=e.length||isNaN(i))throw new RangeError("Invalid patch diff op: Key out of range: "+i)}}function c(e,t,i){let r=t.op;if("string"!=typeof t.key)throw console.warn("Invalid patch details",e,t,i),new TypeError(`Invalid patch object op: Key is not a string: ${t.key}`);let n=t.key;if("add"===r){if((0,s.Bo)(n,i))throw new Error("Invalid add key diff op: Key already present: "+n)}else if("remove"===r){if(!(0,s.Bo)(n,i))throw new Error("Invalid remove key diff op: Missing key: "+n)}else if("replace"===r){if(!(0,s.Bo)(n,i))throw new Error("Invalid replace key diff op: Missing key: "+n)}else{if("patch"!==r)throw new Error("Invalid op: "+r);if(!(0,s.Bo)(n,i))throw new Error("Invalid patch key diff op: Missing key: "+n)}}},3781:(e,t,i)=>{"use strict";i.d(t,{rH:()=>v,k5:()=>x,oz:()=>y,Um:()=>c,i_:()=>k,yv:()=>E,zG:()=>u,fy:()=>b,zr:()=>h,Jj:()=>D,Z:()=>C,tM:()=>_,CL:()=>f});var s=i(7932),r=i(1156),n=i(4526),o=i(7930),l=i(8799),a=i(4850),d=i(1386);class c{constructor(e,t,i,s,r,n,o){this.base=e,this._remote=t,null===e?(console.assert(0===s.length),this.deletions=[]):this.deletions=(0,l.Tr)(s,e),null===t?(console.assert(0===i.length),this.additions=[]):this.additions=(0,l.Tr)(i,t),this.collapsible=!0===r,this.collapsible&&(this.collapsibleHeader=n||"",this.startCollapsed=!0===o)}iterateDiffs(){return new c.DiffIter(this)}getLineChunks(){let e=new a.oy,t=this.iterateDiffs();for(let i=t.next();void 0!==i;i=t.next())e.addDiff(i.range,i.isAddition);return e.chunks}get remote(){return this._remote}set remote(e){this._remote=e}get unchanged(){return this.base===this.remote}get added(){return null===this.base}get deleted(){return null===this.remote}get additions(){return this._additions}set additions(e){this._additions=e}get deletions(){return this._deletions}set deletions(e){this._deletions=e}}function h(e,t){console.assert(!!t,"Patch model needs diff.");const i=o.JSONExt.deepCopy(e);let s=(0,d.hh)(i),r=(0,d.GW)(i,t);return new c(s,r.remote,r.additions,r.deletions)}function u(e,t){let i=(0,d.hh)(e),s=(0,d.hh)(t),r=[],n=[];if(null===e&&null===t)throw new Error("Invalid arguments to createDirectStringDiffModel(). Both base and remote cannot be equal!");if(null===e)i=null,r.push(new l.xJ(0,s.length,void 0));else if(null===t)s=null,n.push(new l.xJ(0,i.length,void 0));else if(s!==i)throw new Error("Invalid arguments to createDirectStringDiffModel(). Either base or remote should be null, or they should be equal!");return new c(i,s,r,n)}function f(e,t,i){"code"===t.cell_type?e.mimetype=i:"markdown"===t.cell_type?e.mimetype="text/markdown":s.isRaw(t)&&(e.mimetype=t.metadata.format||"text/plain")}!function(e){e.DiffIter=class{constructor(e){this.editOffset=0,this.done=!1,this.ia=0,this.id=0,this.hintTakeDeletion=!1,this.model=e}next(){let e=null,t=null,i=this.model.additions,s=this.model.deletions,r=this.hintTakeDeletion;if(this.hintTakeDeletion=!1,this.ia<this.model.additions.length)if(this.id<s.length){let t=i[this.ia],n=s[this.id];t.from.line===n.from.line-this.editOffset&&t.from.column===n.from.column?r?e=!1:(this.hintTakeDeletion=!0,e=!0):e=t.from.line<n.from.line-this.editOffset||t.from.line===n.from.line-this.editOffset&&t.from.column<n.from.column}else e=!0;else{if(!(this.id<s.length))return void(this.done=!0);e=!1}t=e?i[this.ia++]:s[this.id++];let n=t.to.line-t.from.line;return t.endsOnNewline&&(n+=1),this.editOffset+=e?-n:n,{range:t,isAddition:e}}};class t{static cmp(e,t,i,s){if(void 0===e&&void 0===t)return 0;if(void 0===e)return 1;if(void 0===t)return-1;let r=e.range.from.line+(e.isAddition?i:0),n=t.range.from.line+(t.isAddition?s:0);return r<n||e.range.from.column<t.range.from.column?-1:r>n||e.range.from.column>t.range.from.column?1:0}constructor(e){this.currentOffset=0,this.models=[],this.iterators=[],this.values=[],this.offsets=[];for(let t of e){if(null===t)continue;this.models.push(t);let e=t.iterateDiffs();this.iterators.push(e),this.offsets.push(0),this.values.push(e.next())}}next(){let e=0;for(let i=1;i<this.values.length;++i)0>t.cmp(this.values[i],this.values[e],this.iterators[i].editOffset,this.iterators[e].editOffset)&&(e=i);this.i=e;let i=this.values[e];return this.currentOffset=this.offsets[e],this.offsets[e]=this.iterators[e].editOffset,void 0!==i&&(this.values[e]=this.iterators[e].next()),i}currentModel(){return this.models[this.i]}}e.SyncedDiffIter=t}(c||(c={}));var m=i(4901);class p{constructor(e,t,i){if(this.trustedChanged=new m.Signal(this),!t&&!e)throw new Error("Either remote or base value need to be given");this.base=e,this.remote=!t&&i?(0,d.r$)(e,i):t,this.diff=i||null,this.collapsible=!1}get unchanged(){return JSON.stringify(this.base)===JSON.stringify(this.remote)}get added(){return null===this.base}get deleted(){return null===this.remote}stringify(e){let t=function(e,i,s){if(!e)return e;if(Array.isArray(i)){const r=i.length>2?i.slice(1):i[1];return t(s?s(e,i[0]):e[i[0]],r,s)}return s?s(e,i):e[i]};const i=o.JSONExt.deepCopy(this.base);let s=e?t(i,e):i;const r=o.JSONExt.deepCopy(this.remote);let l=e?t(r,e):r,a=this.diff&&e?t(this.diff,e,n.B6):this.diff,d=null;return d=this.unchanged||this.added||this.deleted||!a?u(s,l):h(s,a),d.mimetype=e?this.innerMimeType(e):"application/json",d.collapsible=this.collapsible,d.collapsibleHeader=this.collapsibleHeader,d.startCollapsed=this.startCollapsed,d}get trusted(){return this._trusted}set trusted(e){this._trusted!==e&&(this._trusted=e,this.trustedChanged.emit(e))}get contents(){let e=[];return this.base&&e.push(this.base),this.remote&&this.remote!==this.base&&e.push(this.remote),e}}const g=["text/plain","application/vnd.jupyter.stdout","application/vnd.jupyter.stderr"];class y extends p{hasMimeType(e){let t=this.base||this.remote;return s.isStream(t)&&-1!==g.indexOf(e)?"text":s.isError(t)?"traceback":(s.isExecuteResult(t)||s.isDisplayData(t))&&e in t.data?["data",e]:null}innerMimeType(e){let t=(this.base||this.remote).output_type;if("stream"===t&&"text"===e||"error"===t&&"traceback"===e)return"text/plain";if(("execute_result"===t||"display_data"===t)&&Array.isArray(e))return e[1];throw new r.c("Unknown MIME type for key: "+e)}stringify(e){let t=super.stringify(e);return e&&(t.mimetype=this.innerMimeType(e)),t}}function _(e,t,i){let s=[];if(null!==t||i)if(null===e){if(null===t)throw new Error("Either base or remote need to be specififed!");for(let e of t)s.push(new y(null,e))}else if(t===e)for(let t of e)s.push(new y(t,t));else{if(!i)throw new Error("Invalid arguments to makeOutputModels()");{let t=0,r=0;for(let n of i){let i=n.key;for(let r of e.slice(t,i))s.push(new y(r,r));if("addrange"===n.op){for(let e of n.valuelist)s.push(new y(null,e));r=0}else if("removerange"===n.op){let t=n.length;for(let r=i;r<i+t;r++)s.push(new y(e[r],null));r=t}else{if("patch"!==n.op)throw new Error("Invalid diff operation: "+n);s.push(new y(e[i],null,n.diff)),r=1}t=Math.max(t,i+r)}for(let i of e.slice(t))s.push(new y(i,i))}}else{if(null===e)throw new Error("Either base or remote need to be specififed!");for(let t of e)s.push(new y(t,null))}return s}class w{constructor(e,t,i,s,r){this.base=e,this.remote=t,this.collapsible=!0===i,this.collapsible&&(this.collapsibleHeader=s||"",this.startCollapsed=!0===r)}get unchanged(){return this.base===this.remote}get added(){return void 0===this.base}get deleted(){return void 0===this.remote}}function b(e,t,i){if(i){if("add"===i.op){if(void 0!==e)throw new Error("Invalid diff op on immutable value");return new w(e,i.value)}if("remove"===i.op){if(void 0===e)throw new Error("Invalid diff op on immutable value");return new w(e,void 0)}if(void 0===e)throw new Error("Invalid diff op on immutable value");return new w(e,i.value)}return new w(e,t)}class v{constructor(e,t,i,s,n,o){if(this.source=e,this.metadata=t,this.outputs=i,this.executionCount=s,this.cellType=n,this.cellId=o,null===i&&"code"===n)throw new r.c("Invalid code cell, missing outputs!");this.metadata.collapsible=!0,this.metadata.collapsibleHeader="Metadata changed",this.metadata.startCollapsed=!0}get unchanged(){let e=this.source.unchanged;if(e=e&&(!this.metadata||this.metadata.unchanged),this.outputs)for(let t of this.outputs)e=e&&t.unchanged;return this.executionCount&&(e=e&&this.executionCount.unchanged),e}get added(){return this.source.added}get deleted(){return this.source.deleted}getChunkedOutputs(){if(null===this.outputs)return null;const e=[];if(this.added||this.deleted)for(let t of this.outputs)e.push([t]);else{let t=[];for(let i of this.outputs)i.added||i.deleted?t.push(i):(t.length&&e.push(t),e.push([i]),t=[]);t.length&&e.push(t)}return e}}function D(e,t,i){let r=null,o=null,l=null,a=null,d=(0,n.B6)(t,"source");if(r=d?h(e.source,d):u(e.source,e.source),f(r,e,i),d=(0,n.B6)(t,"metadata"),o=d?h(e.metadata,d):u(e.metadata,e.metadata),s.isCode(e)){let i=e.outputs,s=(0,n.B6)(t,"outputs");l=s?_(i,null,s):_(i,i);let r=e.execution_count;a=b(r,r,(0,n.bp)(t,"execution_count"))}let c=e.id;const m=b(c,c,(0,n.bp)(t,"id"));return new v(r,o,l,a,e.cell_type,m)}function C(e,t){let i=u(e.source,e.source);f(i,e,t);let r=u(e.metadata,e.metadata),n=null,o=null;if(s.isCode(e)){n=_(e.outputs,e.outputs);let t=e.execution_count;o=b(t,t)}let l=e.id;const a=b(l,l);return new v(i,r,n,o,e.cell_type,a)}function k(e,t){let i=u(null,e.source);f(i,e,t);let r=u(null,e.metadata),n=null,o=null;s.isCode(e)&&(n=_(null,e.outputs),o=b(null,e.execution_count));const l=b(null,e.id);return new v(i,r,n,o,e.cell_type,l)}function E(e,t){let i=u(e.source,null);f(i,e,t);let r=u(e.metadata,null),n=null,o=null;s.isCode(e)&&(n=_(e.outputs,null),o=b(e.execution_count,null));const l=b(e.id,null);return new v(i,r,n,o,e.cell_type,l)}class x{constructor(e,t){let i,s=(0,n.B6)(t,"metadata");e.metadata&&s?this.metadata=h(e.metadata,s):this.metadata=null,this.metadata&&(this.metadata.collapsible=!0,this.metadata.collapsibleHeader="Notebook metadata changed",this.metadata.startCollapsed=!0);try{i=e.metadata.language_info.mimetype}catch(e){}this.mimetype=i||"text/python",this.cells=[],this.chunkedCells=[];let r=0,o=0,l=-1,a=[];for(let i of(0,n.B6)(t,"cells")||[]){let t=i.key;for(let i=r;i<t;i++){let t=C(e.cells[i],this.mimetype);this.cells.push(t),this.chunkedCells.push([t])}if(t!==l&&(a=[],this.chunkedCells.push(a),l=t),"addrange"===i.op){for(let e of i.valuelist){let t=k(e,this.mimetype);this.cells.push(t),a.push(t)}o=0}else if("removerange"===i.op){o=i.length;for(let i=t;i<t+o;i++){let t=E(e.cells[i],this.mimetype);this.cells.push(t),a.push(t)}}else if("patch"===i.op){a.length>0&&(a=[],this.chunkedCells.push(a));let s=D(e.cells[t],i.diff,this.mimetype);this.cells.push(s),a.push(s),o=1}r=Math.max(r,t+o)}for(let t=r;t<e.cells.length;t++){let i=C(e.cells[t],this.mimetype);this.cells.push(i),this.chunkedCells.push([i])}}}},8799:(e,t,i)=>{"use strict";i.d(t,{RL:()=>l,Tr:()=>d,sg:()=>a,xJ:()=>r});var s=i(8439);class r{constructor(e,t,i){this.from=e,this.to=e+t,this.source=i}offset(e){this.from+=e,this.to+=e}}class n{constructor(e,t,i,s){this.from=e,this.to=t,this.chunkStartLine=!0===i,this.endsOnNewline=!0===s}}function o(e,t){if(0===e.length)return 0;let i=null;return e.some((function(e,s){return e>=t&&(i=s,!0)})),null===i?e.length:i}function l(e,t){return e.line(t.line+1).from+t.column}function a(e,t){let i=e.lineAt(t);return{line:i.number-1,column:t-i.from}}function d(e,t){let i=[],r=-1;for(;-1!==(r=t.indexOf("\n",r+1));)i.push(r);let l=[];for(let r of e){let e=o(i,r.from),a=e>0?i[e-1]+1:0,d={line:e,column:r.from-a};e=o(i,r.to-1),a=e>0?i[e-1]+1:0;let c={line:e,column:r.to-a},h=(0,s.Bo)(r.from,i),u=(0,s.Bo)(r.to-1,i),f=0===d.column&&(d.line!==c.line||u||r.to===t.length)||!h||!(0,s.Bo)(r.from-1,i)&&!(0,s.Bo)(r.to,i),m=new n(d,c,f,u);m.source=r.source,l.push(m)}return l}},4526:(e,t,i)=>{"use strict";i.d(t,{B6:()=>o,Ec:()=>n,I$:()=>d,bp:()=>l,ob:()=>c});var s=i(8439),r=i(4632);const n="  ";function o(e,t){if(!e)return null;for(let i=0;i<e.length;++i)if(e[i].key===t)return e[i].diff||null;return null}function l(e,t){if(!e)return null;for(let i=0;i<e.length;++i)if(e[i].key===t)return e[i];return null}function a(e,t,i){if((0,r.X9)(e,t),"patch"===t.op){let i=e[t.key],s=t.diff;if(null!==s)for(let e of s)(0,r.X9)(i,e)}}function d(e){if(!e)return null;let t=[];for(let i of e)if("patch"===i.op)t.push({key:i.key,op:i.op,diff:d(i.diff)});else{let e=(0,s.DC)(i);delete e.source,t.push(e)}return t}function c(e,t){"string"==typeof e&&(e=(0,s.uq)(e));let i=[0].concat((0,s.eW)(e)),n=[];for(let o of t){a(e,o);let t=i[o.key];if("patch"===o.op){let e=o.diff;if(null!==e)for(let i of e){let e=(0,s.DC)(i);e.key+=t,n.push(e)}}else{let e=null;if("addrange"===o.op)e=(0,r.SG)(t,o.valuelist.join(""));else{let s=o.key+o.length;e=(0,r.Sn)(t,i[s]-t)}e.source=o.source,n.push(e)}}return(0,s.YC)(n,"key")}},5494:(e,t,i)=>{"use strict";i.d(t,{An:()=>d,Ok:()=>h,Uz:()=>s,We:()=>a,_B:()=>o,_E:()=>r,b1:()=>l,b7:()=>c,ni:()=>n});const s="jp-Diff-twoway",r="jp-Diff-added",n="jp-Diff-deleted",o="jp-Diff-unchanged",l=["jp-Diff-base","jp-Diff-remote"],a="jp-Diff-addremchunk",d="jp-Diff-addedchunk",c="jp-Diff-removedchunk",h="jp-Diff-label"},2009:(e,t,i)=>{"use strict";i.d(t,{j:()=>v,BB:()=>C,Re:()=>E});var s=i(8778),r=i(9499),n=i(8566),o=i(3788),l=i(1770),a=i(8439),d=i(9280),c=i(3781),h=i(5494),u=i(6697);class f extends s.Widget{constructor(e,t,i,r){super(),this.rendermime=i,this.model=e,this.mimetype=r;let n=e.base,o=e.remote;this.layout=new s.PanelLayout;let l=0;if(n){let i=this.createSubView(n,e.trusted);this.layout.addWidget(i),i.addClass(t[l++])}if(o&&o!==n){let i=this.createSubView(o,e.trusted);this.layout.addWidget(i),i.addClass(t[l++])}}get layout(){return super.layout}set layout(e){super.layout=e}}const m="jp-Diff-trustCandidate",p=["text/html"];let g=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/;function y(e,t=64){return null!==e&&e.length>t&&g.test(e.replace("\n",""))}class _ extends n.k{constructor({parent:e,editorClasses:t,rendermime:i,...r}){if(super(r),this._mimetype=null,this.forceText=!1,this.rendermime=i,this._trans=this._translator.load("nbdime"),this.editorClasses=t,this._model.trustedChanged.connect(((e,t)=>{this.trustedChanged(t)})),_.isTrustSignificant(this._model,this.rendermime)&&this.addClass(m),this._model.added){if(!e.added){let e=new s.Widget;e.node.textContent=this._trans.__("Output added"),e.addClass(h.Ok),this.addWidget(e)}this.addClass(h._E)}else if(this._model.deleted){if(!e.deleted){let e=new s.Widget;e.node.textContent=this._trans.__("Output deleted"),e.addClass(h.Ok),this.addWidget(e)}this.addClass(h.ni)}else this._model.unchanged?this.addClass(h._B):this.addClass(h.Uz);let n=this.createView();this.initContainer(n),this.createHoverMenu(),this.addClass("jp-Diff-outputPanel")}initContainer(e){this._model.collapsible?this.container=new o.m(e,this._model.collapsibleHeader,this._model.startCollapsed):(this.container=this,this.container.addWidget(e)),this.view=e}replaceView(e){let t=this.view,i=this.container.widgets.indexOf(t);this.container.insertWidget(i,e),t.parent=null,this.view=e}createView(e=!1){let t=null,i=this._model,s=this.rendermime;return t=w.canRender(i,s)&&!e?new w(i,this.editorClasses,s,this.selectedMimetype):this.createOutputTextView(),t}createOutputTextView(){let e,t=this._model,i=null;if(null===this.selectedMimetype?(0,u.find)(this.rendermime.mimeTypes,(e=>(i=t.hasMimeType(e),null!==i))):i=t.hasMimeType(this.selectedMimetype),i){let s=t.stringify(i);y(s.base||s.remote)||(e=(0,l.LI)({remote:s,factory:this._editorFactory,translator:this._translator,...this._viewOptions}))}return e||(e=(0,l.LI)({remote:t.stringify(),factory:this._editorFactory,translator:this._translator,...this._viewOptions})),e}createHoverMenu(){this.menu=new s.Panel,this.menu.addClass("jp-Diff-outputMenu"),this.container.addWidget(this.menu);let e=document.createElement("button"),t=[this._trans.__("Show source"),this._trans.__("Render")];e.textContent=t[0],e.onclick=i=>{this.forceText=!this.forceText,e.textContent=t[this.forceText?1:0],this.updateView()};let i=new s.Widget({node:e});i.addClass("jp-Diff-showOutputSourceButton"),this.menu.addWidget(i);let n=document.createElement("button");n.textContent=this._trans.__("Trust"),n.onclick=e=>{this._model.trusted=!this._model.trusted},i=new s.Widget({node:n}),i.addClass("jp-Diff-trustOutputButton"),this.menu.addWidget(i);let o=[];for(let e of this._model.contents){let t=r.OutputModel.getData(e);o=o.concat(Object.keys(t))}if(o=o.filter(a.Tw),o.length>1){let e=(0,a.zO)(o),t=this.selectedMimetype;t&&(e.selectedIndex=o.indexOf(t)),e.onchange=t=>{this.selectedMimetype=o[e.selectedIndex]},i=new s.Widget({node:e}),i.addClass("jp-Diff-outputMimetypeSelect"),this.menu.addWidget(i)}else if(1===o.length){let e=document.createElement("span");e.innerText=o[0],i=new s.Widget({node:e}),this.menu.addWidget(i)}}trustedChanged(e){this.updateView(),e?this.removeClass(m):_.isTrustSignificant(this._model,this.rendermime)&&this.addClass(m)}updateView(){let e=this._model;if(this.view instanceof w)if(!this.forceText&&w.canRender(e,this.rendermime))this.view.updateView(this.selectedMimetype,e.trusted);else{let e=this.createView(this.forceText);this.replaceView(e)}else{let e=this.createView(this.forceText);this.replaceView(e)}}get selectedMimetype(){if(null!==this._mimetype)return this._mimetype;let e=r.OutputModel.getData(this._model.base||this._model.remote),t=this.rendermime.preferredMimeType(e,this._model.trusted?"any":"ensure");return void 0===t?null:t}set selectedMimetype(e){this._mimetype!==e&&(this._mimetype=e,this.updateView())}static isTrustSignificant(e,t){if(e.trusted)return!1;let i=[];e.base&&i.push(e.base),e.remote&&e.remote!==e.base&&i.push(e.remote);for(let e of i){let i=new r.OutputModel({value:e,trusted:!1}),s=Object.keys(i.data),n=(0,u.toArray)(t.mimeTypes),o=(0,a.jV)(s,n);for(let e of o){let i=t.getFactory(e);if(i&&(!i.safe||-1!==p.indexOf(e)))return!0}}return!1}}class w extends f{constructor(e,t,i,s){super(e,t,i,s)}createSubView(e,t){let i=new b(this.rendermime);return i.updateView(e,t,this.mimetype),i}updateView(e,t){let i=0,s=this.model;this.mimetype=e,(0,u.each)(this.layout.widgets,(r=>{if(r instanceof b){let n=null;0===i&&s.base?n=s.base:s.remote&&(n=s.remote),n&&r.updateView(n,t,e),++i}}))}static canRender(e,t){let i=e.contents;for(let s of i){let i=r.OutputModel.getData(s);if(!t.preferredMimeType(i,e.trusted?"any":"ensure"))return!1}return!0}}class b extends s.Panel{constructor(e){super(),this.rendermime=e}updateView(e,t,i){let s=this.renderer;this.renderer=this.createRenderer(e,t,i),void 0!==s&&s.dispose(),this.addWidget(this.renderer)}createRenderer(e,t,i){let s=new r.OutputModel({value:e,trusted:t}),n=this.rendermime.createRenderer(i);return n.renderModel(s),n.addClass("jp-Diff-renderedOutput"),y(r.OutputModel.getData(e)[i])&&n.addClass("jp-diff-base64Output"),n}}const v="jp-Cell-diff",D="jp-Cellrow-outputs";class C extends n.k{constructor({rendermime:e,mimetype:t,...i}){super(i),this.addClass(v),this._rendermime=e,this._trans=this._translator.load("nbdime"),this.mimetype=t,this.init()}init(){let e=this.model,t=h.b1.slice();e.added?(this.addClass(h._E),t=h.b1.slice(1,2)):e.deleted?(this.addClass(h.ni),t=h.b1.slice(0,1)):e.unchanged?this.addClass(h._B):this.addClass(h.Uz);let i=C.createView({model:e.source,parent:e,editorClasses:t,rendermime:this._rendermime,editorFactory:this._editorFactory,translator:this._translator,...this._viewOptions});if(i.addClass("jp-Cellrow-source"),e.executionCount||e.cellId){const t=e=>{let t=new s.Widget;return t.node.innerText=e,t},r=C.createHeader();d.U.setGrow(r,1),i.insertWidget(0,r);const n=e.executionCount?C.createPrompts(e.executionCount,e):{base:null,remote:null},o=e.cellId?C.createIdentifiers(e.cellId,e):{base:null,remote:null},l=["base","remote"];for(let i of l){const s=n[i],l=o[i];if(e.executionCount&&null!==s){let e=t(s);e.addClass("jp-InputPrompt"),e.addClass("jp-Cellrow-header-executionCount"),r.addWidget(e)}if(e.cellId&&null!==l){let e=t(`Cell ID: ${l}`);e.addClass("jp-Cellrow-header-cellId"),d.U.setGrow(e,1),r.addWidget(e)}}}if(this.addWidget(i),!e.metadata.unchanged){let i=C.createView({model:e.metadata,parent:e,editorClasses:t,rendermime:this._rendermime,editorFactory:this._editorFactory,translator:this._translator,...this._viewOptions});i.addClass("jp-Cellrow-metadata"),this.addWidget(i)}const r=e.getChunkedOutputs();if((0,a.bd)(r)){let i=new s.Panel;i.addClass("jp-Diff-outputsContainer");let n=!1;for(let o of r)if(1===o.length){let s=o[0],r=C.createView({model:s,parent:e,editorClasses:t,rendermime:this._rendermime,editorFactory:this._editorFactory,translator:this._translator,...this._viewOptions});i.addWidget(r),n=n||!s.unchanged||s.added||s.deleted}else{let r=new s.Panel;r.addClass(h.We);let l=new s.Panel;l.addClass(h.An);let a=new s.Panel;a.addClass(h.b7);for(let i of o){let s=i.deleted?a:l,r=C.createView({model:i,parent:e,editorClasses:t,rendermime:this._rendermime,editorFactory:this._editorFactory,translator:this._translator,...this._viewOptions});s.addWidget(r),n=n||!i.unchanged||i.added||i.deleted}r.addWidget(l),r.addWidget(a),i.addWidget(r)}if(e.added||e.deleted)i.addClass(D),this.addWidget(i);else{let e=!n,t=n?this._trans.__("Outputs changed"):this._trans.__("Outputs unchanged"),s=new o.m(i,t,e);s.addClass(D),this.addWidget(s)}}}static createHeader(){let e=new d.U({direction:"left-to-right"});return e.addClass("jp-Cellrow-header"),e}static createPrompts(e,t){const i={base:null,remote:null};if(!t.added){let t=e.base;i.base=`In [${t||" "}]:`}if(!t.unchanged&&!t.deleted){let t=e.remote;i.remote=`In [${t||" "}]:`}return i}static createIdentifiers(e,t){return{base:e.base,remote:e.remote}}static createView({model:e,parent:t,editorClasses:i,rendermime:n,editorFactory:a,translator:d,...u}){let f;if(e instanceof c.Um){let i=null;if(e.unchanged&&"markdown"===t.cellType){let t=new r.MimeModel({data:{"text/markdown":e.base}}),s=n.preferredMimeType(t.data,"ensure");if(!s)throw new Error("No renderer for output");let o=n.createRenderer(s);o.renderModel(t),i=o}else i=(0,l.LI)({remote:e,factory:a,translator:d,...u});e.collapsible?f=new o.m(i,e.collapsibleHeader,e.startCollapsed):(f=new s.Panel,f.addWidget(i))}else{if(!(e instanceof c.oz))throw new Error("Unrecognized model type.");f=new _({model:e,parent:t,editorClasses:i,rendermime:n,editorFactory:a,translator:d}),e.added?f.addClass(h._E):e.deleted?f.addClass(h.ni):e.unchanged?f.addClass(h._B):f.addClass(h.Uz)}return f}get model(){return this._model}}class k extends n.k{constructor(e){super(e),console.assert(!this._model.added&&!this._model.deleted),this.addClass("jp-Metadata-diff"),this.init()}init(){let e=this._model;if(!e.unchanged){this.addClass(h.Uz);let t=(0,l.LI)({remote:e,factory:this._editorFactory,translator:this._translator,...this._viewOptions});e.collapsible&&(t=new o.m(t,e.collapsibleHeader,e.startCollapsed)),this.addWidget(t)}}}class E extends n.k{constructor({rendermime:e,...t}){super(t),this._rendermime=e,this.addClass("jp-Notebook-diff")}init(){let e=this._model,t=this._rendermime,i=Promise.resolve();i=i.then((()=>{e.metadata&&this.addWidget(new k({model:e.metadata,editorFactory:this._editorFactory,translator:this._translator,...this._viewOptions}))}));for(let r of e.chunkedCells)i=i.then((()=>new Promise((i=>{if(1!==r.length||r[0].added||r[0].deleted){let i=new s.Panel;i.addClass(h.We);let n=new s.Panel;n.addClass(h.An);let o=new s.Panel;o.addClass(h.b7);for(let i of r)(i.deleted?o:n).addWidget(new C({model:i,rendermime:t,mimetype:e.mimetype,editorFactory:this._editorFactory,translator:this._translator,...this._viewOptions}));i.addWidget(n),i.addWidget(o),this.addWidget(i)}else this.addWidget(new C({model:r[0],rendermime:t,mimetype:e.mimetype,editorFactory:this._editorFactory,translator:this._translator,...this._viewOptions}));requestAnimationFrame((()=>{i()}))}))));return i}get model(){return this._model}}},1604:(e,t,i)=>{"use strict";i.d(t,{AA:()=>u,DM:()=>a,Qb:()=>b,_M:()=>w,ey:()=>v,hJ:()=>h,i:()=>c,qP:()=>d,uv:()=>y});var s=i(4632),r=i(4526),n=i(1386),o=i(8439);function l(e,t){return void 0===e?t:e}class a{constructor(e,t=null,i=null,s="base",r=!1,n=null,d=null){this.level=0,e instanceof Array?this._path=e:e instanceof a?(this._path=e.absolutePath.slice(),t=e.localDiff,i=e.remoteDiff,s=e.action,r=e.conflict,n=e.customDiff,d=e.similarInsert,this.level=e.level):(this._path=l(e.common_path,[]),t=l(e.local_diff,t),i=l(e.remote_diff,i),s=function(e){if((0,o.Bo)(e,["base","local","remote","local_then_remote","remote_then_local","custom","clear","clear_parent","either"]))return e;throw new Error("Invalid merge decision action: "+e)}(l(e.action,s)),r=l(e.conflict,r),n=l(e.custom_diff,n),d=l(e.similar_insert,d)),this.localDiff=t,this.remoteDiff=i,this.action=s,this.conflict=r,this.customDiff=n,this.similarInsert=d}setValuesFrom(e){this._path=e.absolutePath.slice(),this.localDiff=e.localDiff,this.remoteDiff=e.remoteDiff,this.action=e.action,this.conflict=e.conflict,this.customDiff=e.customDiff,this.similarInsert=e.similarInsert,this.level=e.level}get localPath(){return this._path.slice(this.level)}get absolutePath(){return this._path}set absolutePath(e){this._path=e}pushPath(e){this._path.push(e)}get diffs(){let e=[this.localDiff,this.remoteDiff];return this.customDiff&&e.push(this.customDiff),e}set diffs(e){this.localDiff=e[0],this.remoteDiff=e[1],e.length>2&&(this.customDiff=e[2])}serialize(){return{common_path:this.absolutePath.slice(),local_diff:(0,r.I$)(this.localDiff),remote_diff:(0,r.I$)(this.remoteDiff),action:this.action,conflict:this.conflict,custom_diff:(0,r.I$)(this.customDiff)}}}function d(e,t){return function(e,t){if(e.length===t.length){for(let i=0;i<e.length;++i)if(e[i]!==t[i])return e[i]<t[i]?-1:1;return 0}return t.length-e.length}(e.absolutePath,t.absolutePath)}function c(e,t){if(e.length<1)return null;let i=0;for(let t of e){if(null!==t&&t.length>0)break;i++}if(i===e.length)return console.log("Empty merge decision (no diffs)!"),null;let s=e[i],r=s[0].op,n=s[0].key;for(let t of e)if(t&&t.length>0)for(let e of t)if(e.op!==r||e.key!==n)return null;if("patch"===r){if(!0!==t)for(let t of e)if(t&&t.length>0&&(1!==t.length||!t[0].diff||1!==t[0].diff.length))return null;let i=[];for(let t of e)t&&t.length>0?i.push(t[0].diff):i.push(null);return{diffs:i,key:n}}return null}function h(e,t){for(let i of t.reverse())e=[(0,s.j5)(i,e)];return e}function u(e){for(let t of e){let e=t.diffs,i=t.absolutePath||[],s=c(e,!0);for(;s;)i.push(s.key),e=s.diffs,s=c(e,!0);t.absolutePath=i,t.diffs=e}}function f(e,t){for(let i of t)e=e[i];return e}function m(e,t){return e&&t?e.concat(t):e?e.slice():t?t.slice():[]}function p(e,t){let i=t.action;if("base"===i)return[];if("local"===i||"either"===i)return t.localDiff?t.localDiff.slice():[];if("remote"===i)return t.remoteDiff?t.remoteDiff.slice():[];if("custom"===i)return t.customDiff?t.customDiff.slice():[];if("local_then_remote"===i)return m(t.localDiff,t.remoteDiff);if("remote_then_local"===i)return m(t.remoteDiff,t.localDiff);if("clear"===i){let i=null;if("object"!=typeof e)throw new TypeError("Can only use `'clear'` action on objects/dicts");for(let e of m(t.localDiff,t.remoteDiff))if(i){if(i!==e.key)throw new Error("Cannot combine diffs with different keys")}else i=e.key;if(i){let n=(0,s.kQ)(i,(r=e[i])instanceof Array?[]:"string"==typeof r?"":null===r||(0,o.Bo)(typeof r,["number","boolean"])?null:{});return n.source={decision:t,action:"custom"},[n]}return[]}if("clear_parent"===i){if(Array.isArray(e)){let i=(0,s.Sn)(0,e.length);return i.source={decision:t,action:"custom"},[i]}if("string"==typeof e){let i=(0,o.uq)(e).length,r=(0,s.Sn)(0,i);return r.source={decision:t,action:"custom"},[r]}{let i=[];for(let r of e){let e=(0,s.Ui)(r);e.source={decision:t,action:"custom"},i.push(e)}return i}}throw new Error('The action "'+i+'" is not defined');var r}function g(e,t){for(let i=0;i<t.length;++i){if("string"==typeof e)return[t.slice(0,i),t.slice(i)];e=e[t[i]]}return[t,null]}function y(e,t){let i=(0,o.p$)(e),s=null,r=null,l=null,a=null,d=[],c=!1;for(let e of t){let t=g(i,e.localPath),u=t[0],f=t[1];if((0,o.cO)(u,s))if(c);else{"clear_parent"===e.action&&(c=!0,d=[]);let t=p(a,e);f&&(t=h(t,f)),d=d.concat(t)}else{null!==s&&(null===r?i=(0,n.r$)(a,d):r[l]=(0,n.r$)(a,d)),s=u.slice(),a=i,r=null,l=null;for(let e of u)r=a,a=a[e],l=e;d=p(a,e),f&&(d=h(d,f)),c="clear_parent"===e.action}}return null!==s&&(null===r?i=(0,n.r$)(a,d):r[l]=(0,n.r$)(a,d)),i}function _(e,t){let i=[],s=null;for(let r=0;r<t.length;++r){let n,l=e[t[r]].path,a=e[t[r]].diff;if(i=i.concat(a),n=r===t.length-1?s:e[t[r+1]].path,!(0,o.Ml)(n,l)){let s=_(e,t.slice(r+1));n=e[t[t.length-1]].path;let a=(0,o.Yu)(l,n),d=a?a.length:0;i=h(i,l.slice(d)).concat(h(s,n.slice(d)));break}null!==n&&(i=h(i,l.slice(n.length)),s=n)}return i}function w(e,t,i){let s={},n=[],o="local"===i,l="merged"===i;o||l||console.assert("remote"===i);for(let i of t){let t=null,a=g(e,i.localPath),d=a[0],c=a[1];if(l)t=p(f(e,d),i);else if(t=o?i.localDiff:i.remoteDiff,null===t)continue;let u="/"+d.join("/");if(s.hasOwnProperty(u))if(c){let e=(0,r.B6)(s[u].diff,c[0]);e?e.push.apply(e,t):(t=h(t,c),s[u].diff.push(t[0]))}else s[u].diff=s[u].diff.concat(t);else c&&(t=h(t,c)),s[u]={diff:t,path:d},n.push(u)}return 0===Object.keys(s).length?null:(s.hasOwnProperty("/")||(s["/"]={diff:[],path:[]},n.push("/")),_(s,n))}function b(e,t){let i=new a(e);for(let e of t.slice().reverse()){if(0===i.absolutePath.length)throw new Error("Cannot remove key from empty decision path: "+e+", "+i);let t=i.absolutePath.pop();if(t!==e)throw Error("Cannot push a patch that doesn't correspond to a key in the decision path! Key: "+e+"; Remaining path: "+i.absolutePath.concat([t]));let r=i.localDiff&&i.localDiff.length>0,n=i.remoteDiff&&i.remoteDiff.length>0,o=i.customDiff&&i.customDiff.length>0;i.localDiff=r?[(0,s.j5)(e,i.localDiff)]:null,i.remoteDiff=n?[(0,s.j5)(e,i.remoteDiff)]:null,i.customDiff=o?[(0,s.j5)(e,i.customDiff)]:null}return i}function v(e,t,i,s){let r=[];i=i||0;for(let n of e)void 0!==s&&n.absolutePath.length>s||(0,o.Ml)(t,n.absolutePath.slice(i))&&(n.level=i+t.length,r.push(n));return r}},9073:(e,t,i)=>{"use strict";i.d(t,{M8:()=>u,AH:()=>_});var s=i(7932),r=i(4901),n=i(4526),o=i(3781),l=i(1604),a=i(1386),d=i(8439),c=i(4850),h=i(8799);class u extends o.Um{constructor(e,t,i,s,r,n){super((0,a.hh)(e),"",[],[],s,r,n),this.rawBase=e,this.decisions=t,this._outdated=!0,this._sourceModels=i,this._update()}get additions(){return this._outdated&&this._update(),this._additions}set additions(e){this._additions=e}get deletions(){return this._outdated&&this._update(),this._deletions}set deletions(e){this._deletions=e}get remote(){return this._outdated&&this._update(),this._remote}set remote(e){this._remote=e}invalidate(){this._outdated=!0}get invalid(){return this._outdated}getLineChunks(){let e=[this];e=e.concat(this._sourceModels);let t=new c.oy,i=new o.Um.SyncedDiffIter(e);for(let e=i.next();void 0!==e;e=i.next())if(i.currentModel()===this)t.addDiff(e.range,e.isAddition);else{if(!e.range.source||"base"!==e.range.source.decision.action)continue;t.addGhost(e.range,e.isAddition,i.currentOffset)}return t.chunks}_update(){this._outdated=!1;let e=(0,l._M)(this.rawBase,this.decisions,"merged"),t=(0,a.GW)(this.rawBase,e);this._additions=(0,h.Tr)(t.additions,t.remote),this._deletions=(0,h.Tr)(t.deletions,this.base||""),this._remote=t.remote}}class f{constructor(e,t,i,s){this._finalized=!1,this.base=e,this.mimetype=i,this._allowlist=s||null,this.decisions=t}serialize(){return null===this.base?null:(0,l.uv)(this.base,this.decisions)}get local(){if(void 0===this._local){this._finalizeDecisions();let e=(0,l._M)(this.base,this.decisions,"local");this._local=this.createDiffModel(e)}return this._local}get remote(){if(void 0===this._remote){this._finalizeDecisions();let e=(0,l._M)(this.base,this.decisions,"remote");this._remote=this.createDiffModel(e)}return this._remote}get merged(){return void 0===this._merged&&(this._finalizeDecisions(),this._merged=this.createMergedDiffModel()),this._merged}get subModels(){return[this.local,this.remote,this.merged]}_finalizeDecisions(){if(!this._finalized){for(let e of this.decisions)"either"===e.action?((0,c.mn)(e.localDiff,{decision:e,action:"either"}),(0,c.mn)(e.remoteDiff,{decision:e,action:"either"})):((0,c.mn)(e.localDiff,{decision:e,action:"local"}),(0,c.mn)(e.remoteDiff,{decision:e,action:"remote"})),(0,c.mn)(e.customDiff,{decision:e,action:"custom"});this._finalized=!0}}}var m=i(1156);class p extends f{constructor(e,t,i){super(e,[],i,["source","metadata","outputs","execution_count","id"]),this.deleteCellChanged=new r.Signal(this),this._clearOutputs=!1,this.clearOutputsChanged=new r.Signal(this),this.onesided=!1,this._deleteCell=!1,this.processDecisions(t)}get deleteCell(){return this._deleteCell}set deleteCell(e){this._deleteCell!==e&&(this._deleteCell=e,this.deleteCellChanged.emit(e))}get clearOutputs(){return this._clearOutputs}set clearOutputs(e){this._clearOutputs!==e&&(this._clearOutputs=e,this.clearOutputsChanged.emit(e))}get agreedSource(){return!!this.local&&!!this.remote&&this.local.source.remote===this.remote.source.remote}get agreedMetadata(){return!(!this.local||!this.remote)&&this.local.metadata.remote===this.remote.metadata.remote}get agreedOutputs(){if(!this.local||!this.remote)return!1;let e=this.local.outputs,t=this.remote.outputs;if(!(0,d.bd)(e)||!(0,d.bd)(t))return!(0,d.bd)(e)&&!(0,d.bd)(t);if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(JSON.stringify(e[i].remote)!==JSON.stringify(t[i].remote))return!1;return!0}get agreedIds(){return!(!this.local||!this.remote)&&this.local.cellId.remote===this.remote.cellId.remote}get agreedCell(){return this.agreedSource&&this.agreedMetadata&&this.agreedOutputs&&this.agreedIds}get conflicted(){for(let e of this.decisions)if(e.conflict)return!0;return!1}hasConflictsOn(e){let t=(0,l.ey)(this.decisions,[e],2);for(let e of t)if(e.conflict)return!0;return!1}get sourceConflicted(){return this.hasConflictsOn("source")}get metadataConflicted(){return this.hasConflictsOn("metadata")}get outputsConflicted(){return this.hasConflictsOn("outputs")}clearOutputConflicts(){let e=(0,l.ey)(this.decisions,["outputs"],2);for(let t of e)t.conflict=!1}getExecutionCountDecision(){let e=(0,l.ey)(this.decisions,["cells"],0,2);for(let t of e)if(null!==(0,n.bp)(t.localDiff,"execution_count")||null!==(0,n.bp)(t.remoteDiff,"execution_count")||null!==(0,n.bp)(t.customDiff,"execution_count"))return t;return null}getCellIdDecision(){let e=(0,l.ey)(this.decisions,["cells"],0,2);for(let t of e)if(null!==(0,n.bp)(t.localDiff,"id")||null!==(0,n.bp)(t.remoteDiff,"id")||null!==(0,n.bp)(t.customDiff,"id"))return t;return null}serialize(){if(this.deleteCell)return null;if(null===this.base){if(this.decisions.length>1||!this.merged.added)throw new m.c("Invalid cell decision");let e,t=this.decisions[0];if("local"===t.action||"either"===t.action){if(!t.localDiff)throw new m.c("Invalid cell decision");e=t.localDiff[0]}else if("remote"===t.action){if(!t.remoteDiff)throw new m.c("Invalid cell decision");e=t.remoteDiff[0]}else{if("custom"!==t.action)throw new m.c("Invalid cell decision");if(!t.customDiff)throw new m.c("Invalid cell decision");e=t.customDiff[0]}if("addrange"!==e.op)throw new m.c("Invalid cell decision");return e.valuelist[0]}let e=[];for(let t of this.decisions){let i=new l.DM(t);i.level=2,e.push(i)}let t=(0,l.uv)(this.base,e),i=t.source;return Array.isArray(i)&&(i=i.join("")),i!==this._merged.source.remote&&(console.warn("Serialized outputs doesn't match model value! Keeping the model value."),t.source=(0,d.uq)(this._merged.source.remote)),this.clearOutputs&&s.isCode(t)&&(t.outputs=[]),t}processDecisions(e){if(1===e.length&&(0,d.cO)(e[0].absolutePath,["cells"])){let t=e[0];0===(e=this.applyCellLevelDecision(t)).length&&this.decisions.push(t)}for(let t of e){if(t.level=2,t.absolutePath.length<2||"cells"!==t.absolutePath[0])throw new Error("Not a valid path for a cell decision");if(2===t.absolutePath.length&&((0,d.bd)(t.localDiff)||(0,d.bd)(t.remoteDiff))){let e=(0,l.Qb)(t,t.absolutePath.slice(1,2)),i=(0,d.bd)(e.localDiff)?e.localDiff[0]:null,s=(0,d.bd)(e.remoteDiff)?e.remoteDiff[0]:null,r=this.splitPatch(e,i,s);for(let e of r)e.level=2,this.decisions.push(e)}else this.decisions.push(t)}}applyCellLevelDecision(e){let t=[];if(console.assert(!this.onesided,"Cannot have multiple cell decisions on one cell!"),this.onesided=!0,(0,d.bd)(e.localDiff))if((0,d.bd)(e.remoteDiff))if(console.assert((0,d.bd)(e.localDiff)&&(0,d.bd)(e.remoteDiff)),console.assert(1===e.localDiff.length&&1===e.remoteDiff.length),e.localDiff[0].op===e.remoteDiff[0].op)if(null===this.base){let t=e.localDiff[0].valuelist[0];this._local=(0,o.i_)(t,this.mimetype),this._remote=(0,o.i_)(t,this.mimetype),this._merged=(0,o.i_)(t,this.mimetype)}else this._local=(0,o.yv)(this.base,this.mimetype),this._remote=(0,o.yv)(this.base,this.mimetype),this._merged=(0,o.yv)(this.base,this.mimetype),this.deleteCell=(0,d.Bo)(e.action,["local","remote","either"]);else{let i=[e.localDiff[0].op,e.remoteDiff[0].op];if(console.assert((0,d.Bo)("removerange",i)&&(0,d.Bo)("patch",i)),null===this.base)throw new Error("Invalid merge decision, cannot have null base for deleted cell: "+e);"removerange"===i[0]?(this._local=(0,o.yv)(this.base,this.mimetype),this.deleteCell="local"===e.action,t=t.concat(this.splitPatch(e,null,e.remoteDiff[0]))):(this._remote=(0,o.yv)(this.base,this.mimetype),this.deleteCell="remote"===e.action,t=t.concat(this.splitPatch(e,e.localDiff[0],null))),(0,l.AA)(t)}else{if(this._remote=null,!e.localDiff||1!==e.localDiff.length)throw new Error("Merge decision does not conform to expectation: "+e);if(null===this.base){let t=e.localDiff[0];if("addrange"!==t.op)throw new Error("Merge decision does not conform to expectation: "+e);let i=t.valuelist[0];this._local=(0,o.i_)(i,this.mimetype),this._merged=(0,o.i_)(i,this.mimetype)}else this._local=(0,o.yv)(this.base,this.mimetype),this._merged=(0,o.yv)(this.base,this.mimetype),this.deleteCell=(0,d.Bo)(e.action,["local","either"])}else{if(this._local=null,!e.remoteDiff||1!==e.remoteDiff.length)throw new Error("Merge decision does not conform to expectation: "+e);if(null===this.base){let t=e.remoteDiff[0];if("addrange"!==t.op)throw new Error("Merge decision does not conform to expectation: "+e);let i=t.valuelist[0];this._remote=(0,o.i_)(i,this.mimetype),this._merged=(0,o.i_)(i,this.mimetype)}else this._remote=(0,o.yv)(this.base,this.mimetype),this._merged=(0,o.yv)(this.base,this.mimetype),this.deleteCell=(0,d.Bo)(e.action,["remote","either"])}return t}splitPatch(e,t,i){let s=!!t&&(0,d.bd)(t.diff),r=!!i&&(0,d.bd)(i.diff);if(!s&&!r)return[];let o=s?t.diff:null,a=r?i.diff:null,c=[],h=[];if(s)for(let e of o)h.push(e.key);if(r)for(let e of a)h.push(e.key);if(h=h.filter(d.Tw),s&&r&&t.key!==i.key)throw new Error("Different keys of patch ops given to `splitPatch`.");let u=s?t.key:i.key;for(let t of h){if(this._allowlist&&!(0,d.Bo)(t,this._allowlist))throw new m.c('Currently not able to handle decisions on variable "'+t+'"');let i=(0,n.bp)(o,t),s=(0,n.bp)(a,t),r=!(i&&s),h=e.action;"base"===h&&r&&(h=i?"local":"remote"),c.push(new l.DM(e.absolutePath.concat([u]),i?[i]:null,s?[s]:null,h,e.conflict))}let f=this.splitOnSourceChunks(c);return(0,l.AA)(f),(0,d.XV)(f,l.qP)}splitOnSourceChunks(e){let t=[];for(let i=0;i<e.length;++i){let s=e[i];if("source"===s.absolutePath[2]){let e=this.base.source;Array.isArray(e)||(e=(0,d.uq)(e)),s.level=3;let i=(0,c.Ff)(e,[s]);(0,l.AA)(i),t=t.concat((0,d.XV)(i,l.qP))}else t.push(s)}return t}createDiffModel(e){if(null===this.base)throw new Error("Cannot create a patched or unchanged diff model with null base!");return e&&e.length>0?(0,o.Jj)(this.base,e,this.mimetype):(0,o.Z)(this.base,this.mimetype)}createMergedDiffModel(){if(null===this.base)throw new Error("Cannot create a patched or unchanged merged diff model with null base!");return function(e,t,i,r,c){for(let e of t)if(0===e.localPath.length){let t=(0,l.i)(e.diffs,!0);null!==t&&(e.diffs=t.diffs,e.pushPath(t.key))}let h=new u(e.source,(0,l.ey)(t,["source"],2),[i?i.source:null,r?r.source:null]);(0,o.CL)(h,e,c);let f=new u(e.metadata,(0,l.ey)(t,["metadata"],2),[i?i.metadata:null,r?r.metadata:null]),m=null,p=null;if(s.isCode(e)){if(e.outputs){let i,s=e.outputs,r=(0,l.ey)(t,["outputs"],2),n=(0,l._M)(s,r,"merged");i=n&&n.length>0?(0,a.r$)(s,n):s,m=(0,o.tM)(s,i,n)}let i=e.execution_count,s=(0,l.ey)(t,["cells"],0,2);for(let t of s)if(null!==(0,n.bp)(t.localDiff,"execution_count")||null!==(0,n.bp)(t.remoteDiff,"execution_count")||null!==(0,n.bp)(t.customDiff,"execution_count")){t.level=2;let s=(0,l._M)(e,[t],"merged"),r=(0,d.bd)(s)?s[0]:null;p=(0,o.fy)(i,i,r)}}let g=(0,o.fy)(e.id?e.id:null,null);return new o.rH(h,f,m,p,e.cell_type,g)}(this.base,this.decisions,this.local,this.remote,this.mimetype)}}var g=i(7930);class y extends f{constructor(e,t){super(e,t,"application/json")}serialize(){if(!this.merged||null===this.merged.remote)throw new Error("Missing notebook metadata merge data.");return JSON.parse(this.merged.remote)}createDiffModel(e){if(e&&e.length>0)return(0,o.zr)(this.base,e);{const e=g.JSONExt.deepCopy(this.base);return(0,o.zG)(e,e)}}createMergedDiffModel(){return new u(this.base,this.decisions,[this.local,this.remote])}}class _{static preprocessDecisions(e){let t=[];for(let i of e)t.push(new l.DM(i));t=function(e){let t=[];for(let i of e)if((0,d.cO)(i.absolutePath,["cells"]))if(i.localDiff&&!i.remoteDiff)for(let e of i.localDiff){let s=new l.DM(i);s.localDiff=[e],t.push(s)}else if(i.remoteDiff&&!i.localDiff)for(let e of i.remoteDiff){let s=new l.DM(i);s.absolutePath=i.absolutePath.slice(),s.remoteDiff=[e],t.push(s)}else if(w(i.localDiff))if(w(i.remoteDiff)){let e=new l.DM(i);e.localDiff=i.localDiff.slice(0,1),e.remoteDiff=i.remoteDiff.slice(0,1),t.push(e),t.push(new l.DM(i.absolutePath.slice(),i.localDiff.slice(1),i.remoteDiff.slice(1),"either"))}else{let e=new l.DM(i);e.localDiff=i.localDiff.slice(0,1),t.push(e),t.push(new l.DM(i.absolutePath.slice(),i.localDiff.slice(1),[],"local",i.conflict))}else if(w(i.remoteDiff)){let e=new l.DM(i);e.remoteDiff=i.remoteDiff.slice(0,1),t.push(e),t.push(new l.DM(i.absolutePath.slice(),[],i.remoteDiff.slice(1),"remote",i.conflict))}else if((0,d.bd)(i.remoteDiff)&&(0,d.bd)(i.localDiff))if("addrange,removerange"===[i.remoteDiff[0].op,i.localDiff[0].op].sort().join(",")){let e=new l.DM(i);e.action="local",e.localDiff=i.localDiff.slice(),e.remoteDiff=null,t.push(e);let s=new l.DM(i);s.action="remote",s.localDiff=null,s.remoteDiff=i.remoteDiff.slice(),t.push(s)}else t.push(i);else t.push(i);else t.push(i);return(0,l.AA)(t),t}(t),t=function(e){let t=[],i=function(e,t,i,s){let r=new l.DM(e.absolutePath.slice(),null,null,e.action,e.conflict),n=[{key:t,op:"removerange",length:1}];return console.assert(i||s),i&&(r.localDiff=n),s&&(r.remoteDiff=n),r};for(let s of e){if(!(0,d.cO)(s.absolutePath,["cells"])){t.push(s);continue}let e=(0,d.bd)(s.localDiff)?s.localDiff[s.localDiff.length-1]:null,r=(0,d.bd)(s.remoteDiff)?s.remoteDiff[s.remoteDiff.length-1]:null;if(e&&!r||r&&!e){let n=e||r;if(!("removerange"===n.op&&n.length>1)){t.push(s);continue}for(let o=0;o<n.length;++o)t.push(i(s,n.key+o,!!e,!!r))}else if(r&&e){if("removerange"!==e.op&&"removerange"!==r.op){t.push(s);continue}if(e.op===r.op){let n=e.key,o=r.key,l=Math.min(n,o),a=n+e.length,d=o+r.length,c=Math.max(a,d);for(let e=l;e<c;++e){let r=e>=n&&e<a,l=e>=o&&e<d;t.push(i(s,e,r,l))}}else{let n="removerange"===e.op,o=n?e:r,l=n?r:e;console.assert("patch"===l.op);let a=l.key,d=o.key;for(let e=d;e<d+o.length;++e){let r=i(s,e,n,!n);e===a&&(n?r.remoteDiff=[l]:r.localDiff=[l]),t.push(r)}}}}return t}(t),t=function(e){let t=[],i=function(e,t,i,s){let r=new l.DM(e.absolutePath.slice(),null,null,e.action,e.conflict);if(i&&!(0,d.bd)(e.localDiff)||!i&&!(0,d.bd)(e.remoteDiff))throw new Error("Invalid input: "+e);let n=[{key:(i?e.localDiff:e.remoteDiff)[0].key,op:"addrange",valuelist:[t]}];return console.assert(i||s),i&&(r.localDiff=n),s&&(r.remoteDiff=n),r};for(let s of e){if(!(0,d.cO)(s.absolutePath,["cells"])){t.push(s);continue}let e=!0;if(s.localDiff)for(let t of s.localDiff)if("addrange"!==t.op){e=!1;break}if(s.remoteDiff)for(let t of s.remoteDiff)if("addrange"!==t.op){e=!1;break}if(!e){t.push(s);continue}let r=s.localDiff&&1===s.localDiff.length?s.localDiff[0]:null,n=s.remoteDiff&&1===s.remoteDiff.length?s.remoteDiff[0]:null;if(r&&!n||n&&!r){let e=(r||n).valuelist;for(let o of e)t.push(i(s,o,!!r,!!n))}else if(r&&n)if((0,a.Pz)(r.valuelist)===(0,a.Pz)(n.valuelist))for(let e of r.valuelist)t.push(i(s,e,!0,!0));else{let e=r.key;if(console.assert(e===n.key),"remote_then_local"===s.action){for(let e of n.valuelist){const r=i(s,e,!1,!0);r.action="remote",t.push(r)}for(let e of r.valuelist){const r=i(s,e,!0,!1);r.action="local",t.push(r)}}else{for(let e of r.valuelist){const r=i(s,e,!0,!1);r.action="local",t.push(r)}for(let e of n.valuelist){const r=i(s,e,!1,!0);r.action="remote",t.push(r)}}}}return t}(t),t=function(e){let t=[];for(let i of e){if(!(0,d.cO)(i.absolutePath,["cells"])){t.push(i);continue}let e=(0,d.bd)(i.localDiff)?i.localDiff:null,s=(0,d.bd)(i.remoteDiff)?i.remoteDiff:null;if(e&&e.length<2&&s&&s.length<2){t.push(i);continue}let r=Math.max(e?e.length:0,s?s.length:0);for(let n=0;n<r;++n){let r=e&&n<e.length?[e[n]]:null,o=s&&n<s.length?[s[n]]:null;t.push(new l.DM(i.absolutePath.slice(),r,o,i.action,i.conflict))}}return(0,d.XV)(t,l.qP)}(t),(0,l.AA)(t);for(let e of t)"either"===e.action?((0,c.mn)(e.localDiff,{decision:e,action:"either"}),(0,c.mn)(e.remoteDiff,{decision:e,action:"either"})):((0,c.mn)(e.localDiff,{decision:e,action:"local"}),(0,c.mn)(e.remoteDiff,{decision:e,action:"remote"})),(0,c.mn)(e.customDiff,{decision:e,action:"custom"});return t}constructor(e,t){this.base=e;let i,s=this.constructor.preprocessDecisions(t);try{i=e.metadata.language_info.mimetype}catch(e){}this.mimetype=i||"text/python",this.cells=this.buildCellList(s);let r=(0,l.ey)(s,["metadata"]);this.metadata=new y(e.metadata,r),this.unsavedChanges=!1}serialize(){let e={};for(let t in this.base)(0,d.Bo)(t,["cells","metadata"])||(e[t]=this.base[t]);e.metadata=this.metadata.serialize();let t=[];for(let e of this.cells){let i=e.serialize();null!==i&&t.push(i)}return e.cells=t,e}get decisions(){let e=[];for(let t of this.cells)e=e.concat(t.decisions);return e=e.concat(this.metadata.decisions),e}get conflicts(){let e=[];for(let t of this.decisions)t.conflict&&e.push(t);return e}buildCellList(e){let t=[];for(let e of this.base.cells)t.push({base:e,decisions:[]});let i=0;for(let s of e){let e=s.absolutePath;if(!(e.length<1||"cells"!==e[0]))if((0,d.cO)(e,["cells"])){let e=null,r=!1;for(let n of s.diffs)if(n&&0!==n.length&&(e=n[0].key,"addrange"===n[0].op)){let n=i+e;t.splice(n,0,{base:null,decisions:[s]}),i+=1,r=!0;break}if(r)continue;if(null===e)throw new Error("No index could be found for merge decision!");t[e+i].decisions.push(s)}else t[e[1]].decisions.push(s)}let s=[];for(let e of t)s.push(new p(e.base,e.decisions,this.mimetype));return s}}function w(e){return!!e&&2===e.length&&e[0].key===e[1].key}},9156:(e,t,i)=>{"use strict";i.d(t,{KH:()=>o,N6:()=>c,U5:()=>a,iP:()=>d,pQ:()=>l,s4:()=>n,yR:()=>r});var s=i(8778);const r="jp-Merge-unchanged",n="jp-Merge-oneway-local",o="jp-Merge-oneway-remote",l="jp-Merge-twoway-addition",a="jp-Merge-twoway-deletion",d=["jp-Merge-base","jp-Merge-local","jp-Merge-remote","jp-Merge-merged"];function c(e,t,i=!1){let r=document.createElement("input");r.setAttribute("type","checkbox"),r.checked=e,r.indeterminate=i;let n=new s.Widget,o=document.createElement("label");return o.textContent=t,o.insertBefore(r,o.childNodes[0]),n.node.appendChild(o),{checkbox:r,widget:n}}},6724:(e,t,i)=>{"use strict";i.d(t,{$C:()=>j,cw:()=>J});var s=i(7932),r=i(8778),n=i(8566),o=i(3788),l=i(7930),a=i(5359);const d="jp-DropPanel",c="jp-DragPanel",h="jp-mod-dragHandle",u="jp-mod-dropTarget",f="application/vnd.jupyter.dragindex";function m(e,t,i){let s=e;for(;s&&!s.classList.contains(t);)s=s.parentElement;return!!s&&s===i}function p(e,t){let i=null,s=Array.isArray(e),r=t=>s?e.indexOf(t)>-1:t.parentElement===e,n=t;for(;n&&n!==e;){if(r(n)){i=n;break}n=n.parentElement}return i}class g extends r.Panel{constructor(e={}){super(e),this.acceptDropsFromExternalSource=!0===e.acceptDropsFromExternalSource,this.addClass(d)}handleEvent(e){switch(e.type){case"lm-dragenter":this._evtDragEnter(e);break;case"lm-dragleave":this._evtDragLeave(e);break;case"lm-dragover":this._evtDragOver(e);break;case"lm-drop":this.evtDrop(e)}}validateSource(e){return this.acceptDropsFromExternalSource||e.source===this}findDropTarget(e,t){return t.hasData(f)?p(this.node,e):null}evtDrop(e){let t=e.target;for(;t&&t.parentElement;){if(t.classList.contains(u)){t.classList.remove(u);break}t=t.parentElement}if(t&&m(t,d,this.node))return this.validateSource(e)?void this.processDrop(t,e):(e.dropAction="none",e.preventDefault(),void e.stopPropagation())}onAfterAttach(e){let t=this.node;t.addEventListener("lm-dragenter",this),t.addEventListener("lm-dragleave",this),t.addEventListener("lm-dragover",this),t.addEventListener("lm-drop",this)}onBeforeDetach(e){let t=this.node;t.removeEventListener("lm-dragenter",this),t.removeEventListener("lm-dragleave",this),t.removeEventListener("lm-dragover",this),t.removeEventListener("lm-drop",this)}_evtDragEnter(e){if(!this.validateSource(e))return;let t=this.findDropTarget(e.target,e.mimeData);null!==t&&(this._clearDropTarget(),t.classList.add(u),e.preventDefault(),e.stopPropagation())}_evtDragLeave(e){e.preventDefault(),e.stopPropagation(),this._clearDropTarget()}_evtDragOver(e){if(!this.validateSource(e))return;this._clearDropTarget();let t=this.findDropTarget(e.target,e.mimeData);null!==t&&(t.classList.add(u),e.preventDefault(),e.stopPropagation(),e.dropAction=e.proposedAction)}_clearDropTarget(){let e=this.node.getElementsByClassName(u);e.length&&e[0].classList.remove(u)}}class y extends g{constructor(e={}){super(e),this.drag=null,this.dragHandleClass=h,this._clickData=null,this.childrenAreDragHandles=!0===e.childrenAreDragHandles,this.addClass(c)}dispose(){this.drag=null,this._clickData=null,super.dispose()}handleEvent(e){switch(e.type){case"mousedown":this._evtDragMousedown(e);break;case"mouseup":this._evtDragMouseup(e);break;case"mousemove":this._evtDragMousemove(e);break;default:super.handleEvent(e)}}findDragTarget(e){return p(this.node,e)}getDragImage(e){let t=this.findDragTarget(e);return t?t.cloneNode(!0):null}onDragComplete(e){this.drag=null}onAfterAttach(e){this.node.addEventListener("mousedown",this),super.onAfterAttach(e)}onBeforeDetach(e){let t=this.node;t.removeEventListener("click",this),t.removeEventListener("dblclick",this),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),super.onBeforeDetach(e)}startDrag(e,t,i){let s=this.getDragImage(e);this.drag=new a.Drag({dragImage:s||void 0,mimeData:new l.MimeData,supportedActions:"all",proposedAction:"copy",source:this}),this.addMimeData(e,this.drag.mimeData),this.drag.start(t,i).then(this.onDragComplete.bind(this)),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0)}_findDragHandle(e){let t=null;if(this.childrenAreDragHandles)m(e,c,this.node)&&(t=e);else{let i=e;for(;i&&i!==this.node;){if(i.classList.contains(this.dragHandleClass)){t=i;break}i=i.parentElement}null===t||m(t,c,this.node)||(t=null)}return t}_evtDragMousedown(e){let t=e.target,i=this._findDragHandle(t);null!==i&&0===e.button&&(this._clickData={pressX:e.clientX,pressY:e.clientY,handle:i},document.addEventListener("mouseup",this,!0),document.addEventListener("mousemove",this,!0),e.preventDefault())}_evtDragMouseup(e){if(0!==e.button||!this.drag)return document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),void(this.drag=null);e.preventDefault(),e.stopPropagation()}_evtDragMousemove(e){if(this.drag)return;e.preventDefault(),e.stopPropagation();let t=this._clickData;if(!t)throw new Error("Missing drag data");let i=Math.abs(e.clientX-t.pressX),s=Math.abs(e.clientY-t.pressY);i<5&&s<5||(this.startDrag(t.handle,e.clientX,e.clientY),this._clickData=null)}}class _ extends y{constructor(e={}){super(e)}processDrop(e,t){}findDropTarget(e,t){return null}}class w extends y{move(e,t){t!==e&&(t>e&&(t-=1),this.insertWidget(t,this.widgets[e]))}getIndexOfChildNode(e,t){t=t||this.layout;for(let i=0;i<t.widgets.length;i++)if(t.widgets[i].node===e)return i;return null}addMimeData(e,t){let i=this.findDragTarget(e),s=this.getIndexOfChildNode(i);null!==s&&t.setData(f,s)}processDrop(e,t){if(!g.isValidAction(t.supportedActions,"move")||"none"===t.proposedAction)return t.dropAction="none",t.preventDefault(),void t.stopPropagation();if(!this.validateSource(t))throw new Error("Invalid source!");let i=t.mimeData.getData(f),s=this.getIndexOfChildNode(e);null!==s&&(this.move(i,s),t.preventDefault(),t.stopPropagation(),t.dropAction="move")}}!function(e){e.isValidAction=function(e,t){switch(e){case"all":return!0;case"link-move":return"move"===t||"link"===t;case"copy-move":return"move"===t||"copy"===t;case"copy-link":return"link"===t||"copy"===t;default:return t===e}}}(g||(g={})),function(e){function t(e){e.addClass(h)}e.makeHandle=t,e.unmakeHandle=function(e){e.removeClass(h)},e.createDefaultHandle=function(){let e=new r.Widget;return e.addClass("jp-DragPanel-dragHandle"),t(e),e}}(_||(_={}));class b extends w{static makeGroup(){const e=this._counter++;return b._groups[e]=[],e}setFriendlyGroup(e){this._groupId=e,b._groups[e].push(this)}addToFriendlyGroup(e){e.setFriendlyGroup(this._groupId)}get friends(){if(void 0===this._groupId)throw new Error("Uninitialized drag-drop group");return b._groups[this._groupId]}getIndexOfChildNode(e,t){const i=this.friends;for(let t of i){if(!m(e,d,t.node))continue;let i=p(t.node,e);if(null!==i)return[t.friends.indexOf(t),super.getIndexOfChildNode(i,t.layout)]}return null}validateSource(e){return this.acceptDropsFromExternalSource?-1!==this.friends.indexOf(e.source):super.validateSource(e)}}b._counter=0,b._groups={};var v=i(1770),D=i(8439),C=i(3781),k=i(2009),E=i(9280),x=i(5390);class O extends x.OutputAreaModel{insert(e,t){this.list.insert(e,t)}move(e,t){this.list.move(e,t)}remove(e){return this.list.remove(e)}}class T extends x.OutputArea{onModelChanged(e,t){let i=this.layout;switch(t.type){case"move":i.insertWidget(t.newIndex,i.widgets[t.oldIndex]);break;case"remove":i.removeWidgetAt(t.oldIndex);break;default:return super.onModelChanged(e,t)}}}class M extends g{constructor(){super({acceptDropsFromExternalSource:!0}),this.callback=null}findDropTarget(e){return e===this.node||this.node.contains(e)?this.node:null}processDrop(e,t){this.callback&&this.callback(e,t)}}class S extends w{static makeOutputsDraggable(e){for(const t of e.layout)_.makeHandle(t)}static get deleteDrop(){if(!S._deleteDrop){let e=new M;e.addClass("jp-Merge-output-drop-delete");let t=document.createElement("i");t.className="fa fa-lg fa-trash-o",t.setAttribute("aria-hidden","true"),e.node.appendChild(t),e.node.style.position="absolute",S._deleteDrop=e}return S._deleteDrop}constructor(e,t,i,s,r,n,o=!0){if(super(),this.base=null,this.remote=null,this.local=null,this.showBase=o,this.addClass("jp-Merge-reorder-outputs"),!s!=!r||!s!=!n)throw new Error("Renderable outputs merge-view either takes only merged output or a full set of four output lists.");if(s){this.base=new x.OutputAreaModel;for(let e of s)this.base.add(e);this.remote=new x.OutputAreaModel;for(let e of r)this.remote.add(e);this.local=new x.OutputAreaModel;for(let e of n)this.local.add(e)}this.merged=new O;for(let t of e)this.merged.add(t);this.rendermime=i,this.panes=[],this.init(t)}init(e){let t=new E.U({direction:"left-to-right",evenSizes:!0});if(this.local){let i=new x.OutputArea({model:this.local,rendermime:this.rendermime});i.addClass(e[1]),t.addWidget(i),this.panes.push(i)}if(this.base&&this.showBase){let i=new x.OutputArea({model:this.base,rendermime:this.rendermime});i.addClass(e[0]),t.addWidget(i),this.panes.push(i)}if(this.remote){let i=new x.OutputArea({model:this.remote,rendermime:this.rendermime});i.addClass(e[2]),t.addWidget(i),this.panes.push(i)}t.widgets.length>0&&(this.addWidget(t),t=new E.U({direction:"left-to-right",evenSizes:!0})),this.mergePane=new T({model:this.merged,rendermime:this.rendermime}),this.mergePane.addClass(e[3]),t.addWidget(this.mergePane),this.panes.push(this.mergePane),this.addWidget(t);for(let e of this.panes)S.makeOutputsDraggable(e)}findDragTarget(e){if(null===e)return null;for(let t of this.panes){let i=p(t.node,e);if(null!==i)return i}return null}getIndexOfChildNode(e,t){for(let t of this.panes){let i=p(t.node,e);if(null!==i)return[this.panes.indexOf(t),super.getIndexOfChildNode(i,t.layout)]}return null}move(e,t){let i=e[0],s=t[0];if(this.panes[s]!==this.mergePane)return;let r=e[1],n=t[1],o=n;if(i===s)if(n>r)o-=1,t[1]=o;else if(r===n)return;let l=this.mergePane.model,a=this.panes[i].model;s!==i?l.insert(o,a.get(r)):l.move(r,o),S.makeOutputsDraggable(this.mergePane)}findDropTarget(e){return e===this.mergePane.node&&0===this.mergePane.model.length?this.mergePane.node:p(this.mergePane.node,e)}processDrop(e,t){if(e===S.deleteDrop.node){let[e,i]=t.mimeData.getData(f);if(this.panes[e]!==this.mergePane)return;this.mergePane.model.remove(i),t.preventDefault(),t.stopPropagation(),t.dropAction="move"}else if(e===this.mergePane.node&&0===this.mergePane.model.length){let e=t.mimeData.getData(f);this.move(e,[this.panes.indexOf(this.mergePane),0]),t.preventDefault(),t.stopPropagation(),t.dropAction="copy"}else super.processDrop(e,t)}getDragImage(e){let t=this.findDragTarget(e);if(t){let e=t.cloneNode(!0);return e.style.width=t.offsetWidth.toString()+"px",e.classList.add("jp-Merge-dragimage-output"),e}return null}startDrag(e,t,i){if(super.startDrag(e,t,i),p(this.mergePane.node,e)){let e=S.deleteDrop;e.callback=this.processDrop.bind(this);let t=this.mergePane.node.getBoundingClientRect();e.node.style.left="0",e.node.style.width=(t.left+window.pageXOffset).toString()+"px",e.node.style.top=(t.top+window.pageYOffset).toString()+"px",e.node.style.height=t.height.toString()+"px",r.Widget.attach(e,document.body)}}onDragComplete(e){super.onDragComplete(e),S.deleteDrop.isAttached&&r.Widget.detach(S.deleteDrop)}}S._deleteDrop=null;var W=i(9156);const j="jp-Cell-merge",I="jp-mod-todelete",P="jp-mod-clearoutputs",A="jp-Cellrow-source",F="jp-Cellrow-outputs",L="jp-conflicted-outputs";class N extends n.L{static createMergeView({merged:e,editorFactory:t,readOnly:i,...s}){let r=null;return e instanceof C.Um&&(r=(0,v.LI)({merged:e,readOnly:i??!1,factory:t,...s})),r}static getOutputs(e,t){let i=[];for(let s of e)!0===t?s.base&&i.push(s.base):s.remote&&i.push(s.remote);return i}constructor({rendermime:e,mimetype:t,...i}){super(i),this.sourceView=null,this.metadataView=null,this.outputViews=null,this.addClass(j),this._rendermime=e,this._trans=this._translator.load("nbdime"),this.mimetype=t,this.init()}validateMerged(e){if(this.sourceView&&this.sourceView instanceof v.QK){let t=this.sourceView.getMergedValue(),i=(0,D.uq)(t);e.source!==i&&(e.source=i)}if(this.metadataView&&this.metadataView instanceof v.QK){let t=this.metadataView.getMergedValue();JSON.stringify(e.metadata)!==t&&(e.metadata=JSON.parse(t))}if(s.isCode(e)&&this.outputViews){let t=this.outputViews.merged.toJSON();e.outputs=t}return e}init(){let e=this.model,t=W.iP.slice();this.createHeader(),e.merged.unchanged&&e.local&&e.local.unchanged&&e.remote&&e.remote.unchanged&&this.addClass(W.yR);let i=e.local&&e.local.added,s=e.local&&e.local.deleted,n=e.remote&&e.remote.added,l=e.remote&&e.remote.deleted;if(i&&!n||s&&!l?this.headerTitle=i?this._trans.__("Cell added locally"):this._trans.__("Cell deleted locally"):(n&&!i||l&&!s)&&(this.headerTitle=n?this._trans.__("Cell added remotely"):this._trans.__("Cell deleted remotely")),null===e.local||null===e.remote||e.local.unchanged&&e.remote.unchanged&&e.merged.unchanged||e.local.added!==e.remote.added||e.local.deleted&&e.remote.unchanged||e.local.unchanged&&e.remote.deleted||e.local.added&&e.agreedCell||e.local.deleted&&e.remote.deleted){t=t.slice(1,3);let o=k.BB.createView({model:e.merged.source,parent:e.merged,editorClasses:t,rendermime:this._rendermime,editorFactory:this._editorFactory,translator:this._translator});if(i&&!n||s&&!l?this.addClass(W.s4):n&&!i||l&&!s?this.addClass(W.KH):s&&l?(this.headerTitle=this._trans.__("Deleted on both sides"),this.addClass(W.U5)):i&&n&&(this.headerTitle=this._trans.__("Added on both sides"),this.addClass(W.pQ)),o.addClass(A),this.addWidget(o),(0,D.bd)(e.merged.outputs)){let i=new r.Panel;for(let s of e.merged.outputs)o=k.BB.createView({model:s,parent:e.merged,editorClasses:t,rendermime:this._rendermime,editorFactory:this._editorFactory,translator:this._translator}),i.addWidget(o);i.addClass(F),this.addWidget(i)}}else{let i=e.getExecutionCountDecision();if(i&&"clear"===i.action){let e=new E.U({direction:"left-to-right"});e.addClass("jp-Cellrow-executionCount");let t=new r.Widget;t.node.textContent=this._trans.__("Execution count will be cleared."),e.addWidget(t),this.addWidget(e)}let s=e.getCellIdDecision();s&&s.conflict&&(this.headerTitle=this._trans.__("Cell has conflicting IDs! Use a text editor to edit the value (base value kept)."),this.addClass("jp-conflicted-cellId"));let n=null;if(n=e.local&&e.local.source.unchanged&&e.remote&&e.remote.source.unchanged&&e.merged.source.unchanged?k.BB.createView({model:e.merged.source,parent:e.merged,editorClasses:t,rendermime:this._rendermime,editorFactory:this._editorFactory,translator:this._translator}):N.createMergeView({local:e.local?e.local.source:null,remote:e.remote?e.remote.source:null,merged:e.merged.source,editorClasses:t,editorFactory:this._editorFactory,translator:this._translator,...this._viewOptions}),null===n)throw new Error("Was not able to create merge view for cell!");this.sourceView=n,n.addClass(A),this.addWidget(n);let l=!1,a=!1;for(let t of e.subModels)if(t&&!t.deleted&&(l=l||!!t.metadata&&!t.metadata.unchanged,t.outputs&&t.outputs.length>0))for(let e of t.outputs)a=a||!e.unchanged;if(l){let i=N.createMergeView({local:e.local?e.local.metadata:null,remote:e.remote?e.remote.metadata:null,merged:e.merged.metadata,editorClasses:t,editorFactory:this._editorFactory,translator:this._translator,...this._viewOptions,readOnly:!0});if(null===i)throw new Error("Was not able to create merge view for cell metadata!");this.metadataView=i;let s=new r.Panel;s.addWidget(i);let n=this._trans.__("Metadata changed"),l=new o.m(s,n,!0);l.addClass("jp-Cellrow-metadata"),this.addWidget(l)}if(a||(0,D.bd)(e.merged.outputs)){let t=N.getOutputs(e.local?e.local.outputs:[],!0),i=N.getOutputs(e.local?e.local.outputs:[]),s=N.getOutputs(e.remote?e.remote.outputs:[]),n=N.getOutputs(e.merged.outputs),l=new S(n,W.iP,this._rendermime,t,s,i,this._viewOptions.showBase);this.outputViews=l;let d=a?e.outputsConflicted?this._trans.__("Outputs conflicted"):this._trans.__("Outputs changed"):this._trans.__("Outputs unchanged"),c=new o.m(l,d,!a);if(c.addClass(F),e.outputsConflicted){c.addClass(L);let t=new r.Widget;t.addClass("jp-conflicted-outputs-button");let i=t.node,s=document.createElement("button");s.onclick=i=>{0===i.button&&(e.clearOutputConflicts(),c.removeClass(L),c.headerTitle=this._trans.__("Outputs changed"),i.preventDefault(),i.stopPropagation(),t.parent=null)},s.textContent=this._trans.__("Mark resolved"),i.appendChild(s),c.header.insertWidget(1,t)}this.addWidget(c)}}}createHeader(){let e=new r.Panel;e.addClass("jp-Merge-cellHeader");let t=_.createDefaultHandle();if(e.addWidget(t),t=new r.Widget,this.headerTitleWidget=t,t.addClass("jp-Merge-cellHeader-title"),e.addWidget(t),(0,D.bd)(this.model.merged.outputs)){let t=this._createClearOutputToggle();e.addWidget(t)}let i=this._createDeleteToggle();e.addWidget(i),this.addWidget(e),this.header=e}_createClearOutputToggle(){let{checkbox:e,widget:t}=(0,W.N6)(this.model.clearOutputs,this._trans.__("Clear outputs"));return this.model.clearOutputs&&this.addClass(P),e.onchange=t=>{this.model.clearOutputs=e.checked,this.toggleClass(P,e.checked)},this.model.clearOutputsChanged.connect(((t,i)=>{e.checked=i,this.toggleClass(P,i)})),t.addClass("jp-Merge-clearOutput-toggle"),t}_createDeleteToggle(){let{checkbox:e,widget:t}=(0,W.N6)(this.model.deleteCell,this._trans.__("Delete cell"));return this.model.deleteCell&&this.addClass(I),e.onchange=t=>{this.model.deleteCell=e.checked,this.toggleClass(I,e.checked)},this.model.deleteCellChanged.connect(((t,i)=>{e.checked=i,this.toggleClass(I,i)})),t.addClass("jp-Merge-delete-cell-toggle"),t}set headerTitle(e){this.headerTitleWidget.node.innerText=e}get model(){return this._model}}class B extends n.L{constructor(e){super(e),this.addClass("jp-Metadata-merge"),this.init()}init(){const e=this._model,t={...this._viewOptions},i=0===e.decisions.length;i&&(t.collapseIdentical=!1),this.view=(0,v.LI)({remote:e.remote,local:e.local,merged:e.merged,factory:this._editorFactory,translator:this._translator,...t});const s=this._translator.load("nbdime"),r=new o.m(this.view,i?s.__("Notebook metadata unchanged"):s.__("Notebook metadata changed"),!0);this.addWidget(r)}validateMerged(e){const t=this.view.getMergedValue();return JSON.stringify(e)!==t&&(e=JSON.parse(t)),e}}var V=i(9053),z=i(4901);const R="jp-conflicted-cells";class H extends b{constructor(e){super(e),this._moved=new z.Signal(this),this.addClass("jp-merge-celldragdrop")}move(e,t){let i=e[0],s=t[0],r=e[1],n=t[1],o=n;if(i===s)if(n>r)o-=1,t[1]=o;else if(r===n)return;let l=this.friends[s],a=this.friends[i];const d=a.widgets[r];l.insertWidget(o,d),this._moved.emit({widget:d,oldParent:a,before:o>0?l.widgets[o-1]:null,after:o<l.widgets.length?l.widgets[o+1]:null})}get moved(){return this._moved}}class G extends r.Panel{constructor({translator:e}={}){super(),this._resolved=new z.Signal(this);const t=(e??V.nullTranslator).load("nbdime");this.addClass(R),this.header=new r.Widget,this.header.addClass("jp-conflicted-cells-header"),this.header.node.textContent=t.__("Conflicting cell operations");let i=document.createElement("button");i.textContent=t.__("Resolve Conflict"),i.onclick=this.onResolve.bind(this),i.className="jp-conflicted-cells-button",this.header.node.appendChild(i),this.addWidget(this.header),this.cells=new H,this.addWidget(this.cells)}onResolve(e){for(let e of this.cells.widgets){let t=e.model;if(t.onesided&&t.conflicted)for(let e of t.decisions)e.conflict=!1}this.removeClass(R),this.header.parent=null,this.header.dispose(),this._resolved.emit(void 0)}dispose(){this.cells.parent=null,this.cells=null,this.header&&(this.header.parent=null),this.header=null,super.dispose()}get resolved(){return this._resolved}}class J extends n.L{constructor({rendermime:e,...t}){super(t),this.metadataWidget=null,this._rendermime=e,this.addClass("jp-Notebook-merge")}init(){let e=this._model,t=this._rendermime,i=Promise.resolve();this.addWidget(new K({model:e,translator:this._translator})),i=i.then((()=>{e.metadata&&(this.metadataWidget=new B({model:e.metadata,editorFactory:this._editorFactory,translator:this._translator,...this._viewOptions}),this.addWidget(this.metadataWidget))})),i=i.then((()=>{this.cellContainer=new H({acceptDropsFromExternalSource:!0}),this.cellContainer.setFriendlyGroup(H.makeGroup()),this.cellContainer.moved.connect(this.onDragDropMove,this),this.addWidget(this.cellContainer)})),this.cellWidgets=[];let s=null;for(let r of e.cells)i=i.then((()=>new Promise((i=>{let n=new N({model:r,rendermime:t,mimetype:e.mimetype,editorFactory:this._editorFactory,translator:this._translator,...this._viewOptions});this.cellWidgets.push(n),r.onesided&&r.conflicted?(null===s&&(s=new G({translator:this._translator}),s.cells.moved.connect(this.onDragDropMove,this),s.resolved.connect(this.onChunkResolved,this),this.cellContainer.addToFriendlyGroup(s.cells)),s.cells.addWidget(n)):(null!==s&&(this.cellContainer.addWidget(s),s=null),this.cellContainer.addWidget(n)),requestAnimationFrame((()=>{i()}))}))));return i=i.then((()=>{null!==s&&this.cellContainer.addWidget(s)})),i}validateMerged(e){let t=(0,D.p$)(e);this.metadataWidget&&(t.metadata=this.metadataWidget.validateMerged(e.metadata));let i=0;for(let s of this.cellWidgets)s.model.deleteCell||(t.cells[i]=s.validateMerged(e.cells[i]),++i);return t}get model(){return this._model}onDragDropMove(e,t){let i,{widget:s,oldParent:r,before:n,after:o}=t,l=this._model.cells.indexOf(s.model);if(o)i=this._model.cells.indexOf(o.model);else{if(!n)throw new Error("Need either before or after");i=this._model.cells.indexOf(n.model)+1}if(i>l&&(i-=1),this._model.cells.splice(i,0,this._model.cells.splice(l,1)[0]),0===r.widgets.length&&r.parent.onResolve(),r!==this.cellContainer&&s.parent===this.cellContainer)for(let e of s.model.decisions)e.conflict=!1}onChunkResolved(e,t){let i=this.cellContainer.widgets.indexOf(e);for(;e.cells.widgets.length>0;)this.cellContainer.insertWidget(i++,e.cells.widgets[0]);e.parent=null,e.dispose()}}class K extends E.U{constructor({model:e,translator:t}){super({direction:"left-to-right"}),this.model=e,this.trans=t.load("nbdime"),this.addClass("jp-Merge-notebook-controls");let i=!1;for(let t of e.cells)if((0,D.bd)(t.merged.outputs)){i=!0;break}i&&this.init_controls()}init_controls(){let e=(0,W.N6)(!1,this.trans.__("Clear all cell outputs"));this.clearOutputsToggle=e.checkbox,this.addWidget(e.widget),e=(0,W.N6)(!1,this.trans.__("Clear conflicted cell outputs")),this.clearConflictedOutputsToggle=e.checkbox,this.addWidget(e.widget),this.updateOutputsToggles(),this.connectOutputsToggles()}connectOutputsToggles(){for(let e of this.model.cells)(0,D.bd)(e.merged.outputs)&&e.clearOutputsChanged.connect(this.updateOutputsToggles,this);this.clearOutputsToggle.addEventListener("change",this),this.clearConflictedOutputsToggle.addEventListener("change",this)}disconnectOutputsToggles(){for(let e of this.model.cells)(0,D.bd)(e.merged.outputs)&&e.clearOutputsChanged.disconnect(this.updateOutputsToggles,this);this.clearOutputsToggle.removeEventListener("change",this),this.clearConflictedOutputsToggle.removeEventListener("change",this)}handleEvent(e){"change"===e.type&&(e.currentTarget===this.clearOutputsToggle?this.onClearAllOutputsChanged():e.currentTarget===this.clearConflictedOutputsToggle&&this.onClearConflictedOutputsChanged())}onClearAllOutputsChanged(){this.disconnectOutputsToggles();try{let e=this.clearOutputsToggle.checked;for(let t of this.model.cells)(0,D.bd)(t.merged.outputs)&&(t.clearOutputs=e)}finally{this.updateOutputsToggles(),this.connectOutputsToggles()}}onClearConflictedOutputsChanged(){this.disconnectOutputsToggles();try{let e=this.clearConflictedOutputsToggle.checked;for(let t of this.model.cells)(0,D.bd)(t.merged.outputs)&&t.outputsConflicted&&(t.clearOutputs=e)}finally{this.updateOutputsToggles(),this.connectOutputsToggles()}}updateOutputsToggles(){let e,t;for(let i of this.model.cells){if((0,D.bd)(i.merged.outputs)){let s=i.clearOutputs;null===e||(void 0===e?e=s:e!==s&&(e=null)),i.outputsConflicted&&(null===t||(void 0===t?t=s:t!==s&&(t=null)))}if(null===t&&null===e)break}this.clearOutputsToggle.checked=!0===e,this.clearOutputsToggle.indeterminate=null===e,this.clearConflictedOutputsToggle.checked=!0===t,this.clearConflictedOutputsToggle.indeterminate=null===t,this.clearConflictedOutputsToggle.disabled=void 0===t,void 0===t?this.clearConflictedOutputsToggle.parentElement.setAttribute("disabled",""):this.clearConflictedOutputsToggle.parentElement.removeAttribute("disabled")}}},1386:(e,t,i)=>{"use strict";i.d(t,{r$:()=>w,GW:()=>m,Pz:()=>u,hh:()=>f});var s=i(8439);class r{constructor(e,t){this._diffLUT={};let i=[];if(t)for(let e of t)i.push(e.key),this._diffLUT[e.key]=e;this._diffKeys=i,this.baseKeys=n(e)}keys(){this._remainingKeys=this.baseKeys.concat(this._diffKeys).filter(s.Tw).sort();const e=this;return{[Symbol.iterator]:()=>e}}isDiffKey(e){return(0,s.Bo)(e,this._diffKeys)}getDiffEntry(e){return this._diffLUT[e]}entriesAfterCurrentAddRem(){if(void 0===this._currentIsAddition)throw new Error("Current op is not an add or remove op");let e=this._currentIsAddition?"remove":"add";for(let t of this._remainingKeys){if(!(0,s.Bo)(t,this._diffKeys))return!0;if(this._diffLUT[t].op!==e)return!0}return!1}next(){let e=this._remainingKeys.shift();if(!e)return{done:!0,value:void 0};if(e&&(0,s.Bo)(e,this._diffKeys)){let t=this._diffLUT[e].op;this._currentIsAddition="add"===t||"remove"!==t&&void 0}return{value:e,done:!1}}}let n=Object.keys||function(e){let t=Object.prototype.hasOwnProperty||function(){return!0},i=[];for(let s in e)t.call(e,s)&&i.push(s);return i};var o=i(7930),l=i(4632),a=i(4526),d=i(8799),c=i(7266),h=i.n(c);function u(e,t,i=!0){let r=h()(e,{space:a.Ec});return t&&(r=function(e,t,i){i=!1!==i;let r=e.split("\n"),n=new Array(r.length);i||(n[0]=r[0]);for(let e=i?0:1;e<r.length;e++)n[e]=(0,s.yc)(a.Ec,t)+r[e];return n.join("\n")}(r,t,i)),r}function f(e){return"string"==typeof e?e:null===e?"":u(e)}function m(e,t,i){if(void 0===i&&(i=0),"string"==typeof e)return p(e,t,i,i>0);if(Array.isArray(e))return function(e,t,i){let r="",n=[],o=[],c=0,h=",\n";if(null===t)return{remote:u(e,i),additions:n,deletions:o};let f=0,p=0;for(let s of t){(0,l.X9)(e,s);let t=s.key;for(;t>f;f++){let t=u(e[f],i+1)+h;r+=t,c+=t.length}if("addrange"===s.op){let o="";for(let e of s.valuelist)o+=u(e,i+1)+h;let l=o.length;t===e.length&&(l-=1),n.push(new d.xJ(r.length,l,s.source)),r+=o,p=0}else if("removerange"===s.op){let r="",n=s.length;for(let s=t;s<t+n;s++)r+=u(e[s],i+1)+h;let l=r.length;n+t===e.length&&(l-=1),o.push(new d.xJ(c,l,s.source)),c+=r.length,p=s.length}else if("patch"===s.op){let l=m(e[t],s.diff,i+1);p=1;let a=l.remote+h;y(r.length,l.additions,l.deletions),n=n.concat(l.additions),o=o.concat(l.deletions),c+=u(e[t],i+1).length,r+=a}f=Math.max(f,t+p)}for(;e.length>f;f++)r+=u(e[f],i+1)+h;r.slice(r.length-2)===h&&(r=r.slice(0,r.length-2));let g=(0,s.yc)(a.Ec,i);return r=g+"[\n"+r+"\n"+g+"]",y(g.length+2,n,o),{remote:r,additions:n,deletions:o}}(e,t,i);if("number"==typeof e||"boolean"==typeof e)throw new TypeError("Cannot patch an atomic type: "+typeof e);if(null===e)throw new TypeError("Cannot patch a null base!");return function(e,t,i){let n="",o=[],c=[],h=",\n",f=0;if(null===t)return{remote:u(e,i),additions:o,deletions:c};let p=new r(e,t),_=p.baseKeys.slice();for(const t of p.keys()){let r=g(t,i+1);if(p.isDiffKey(t)){let g=p.getDiffEntry(t);if((0,l.Gz)(e,g,_),(0,s.Bo)(g.op,["add","replace","remove"])){let s="replace"===g.op;if("add"===g.op||"replace"===g.op){let e=u(g.value,i+1,!1)+h,t=n.length,l=e.length;s?t+=r.length:l+=r.length,!s&&p.entriesAfterCurrentAddRem()||(l-=2,"add"===g.op&&(l+=1)),o.push(new d.xJ(t,l,g.source)),n+=r+e}if("remove"===g.op||"replace"===g.op){let n=u(e[t],i+1,!1)+h,o=f,l=n.length;s?o+=r.length:l+=r.length,!s&&p.entriesAfterCurrentAddRem()||(l-=2,"remove"===g.op&&(l+=1)),c.push(new d.xJ(o,l,g.source)),f+=r.length+n.length,_.splice(_.indexOf(t),1)}}else if("patch"===g.op){let s=m(e[t],g.diff,i+1),l=s.remote;l=r+l.slice((i+1)*a.Ec.length)+h,y(n.length+r.length-(i+1)*a.Ec.length,s.additions,s.deletions),n+=l,o=o.concat(s.additions),c=c.concat(s.deletions),f+=u(e[t],i+1,!1).length+r.length+2,_.splice(_.indexOf(t),1)}}else{let s=r+u(e[t],i+1,!1)+h;n+=s,f+=s.length}}n.slice(n.length-2)===h&&(n=n.slice(0,n.length-2));let w=(0,s.yc)(a.Ec,i);return n=w+"{\n"+n+"\n"+w+"}",y(w.length+2,o,c),{remote:n,additions:o,deletions:c}}(e,t,i)}function p(e,t,i,s){let r=[],n=[],o=0;if(null===t)return{remote:s?u(e,i):e,additions:r,deletions:n};t=(0,a.ob)(e,t);let l=0,c=0,h="";for(let i of t){let t=i.key,s=e.slice(l,t);if(h+=s,o+=s.length,"addrange"===i.op){let e=i.valuelist;r.push(new d.xJ(h.length,e.length,i.source)),h+=e,c=0}else"removerange"===i.op&&(c=i.length,n.push(new d.xJ(o,c,i.source)),o+=c);l=Math.max(l,t+c)}return h+=e.slice(l,e.length),s&&(h=u(h,i),y(i*a.Ec.length+1,r,n),_(h,r),_(u(e,i),n)),{remote:h,additions:r,deletions:n}}function g(e,t){return(0,s.yc)(a.Ec,t)+'"'+e+'": '}function y(e,t,i){for(let i of t)i.offset(e);for(let t of i)t.offset(e)}function _(e,t){let i,s=['\\"',"\\\\","\\/","\\b","\\f","\\n","\\r","\\t"],r=/\\uD[89A-Fa-f][0-9a-fA-F]{2}\\uD[c-fC-F][0-9a-fA-F]{2}/g,n=/(?!\\uD[c-fC-F][0-9a-fA-F]{2})\\u(?!D[89A-Fa-f][0-9a-fA-F]{2})\d{4}/g,o=[],l=[];for(let t of s){let i=JSON.parse('"'+t+'"').length,s=0;for(;s=e.indexOf(t,s),!(s<0);)o.push(s),l.push(2-i),s++}for(;null!==(i=n.exec(e));)o.push(i.index),l.push(6-JSON.parse('"'+i[0]+'"').length);for(;null!==(i=r.exec(e));)o.push(i.index),l.push(12-JSON.parse('"'+i[0]+'"').length);for(let e=0;e<o.length;e++)for(let i of t){let t=o[e],s=l[e];i.from>t&&(i.from+=s),i.to>t&&(i.to+=s)}}function w(e,t){if("string"==typeof e)return p(e,t,0,!1).remote;if(Array.isArray(e))return function(e,t){if(null===t)return(0,s.p$)(e);let i=[],r=0,n=0;for(let o of t){(0,l.X9)(e,o);let t=o.key;for(let n of e.slice(r,t))i.push((0,s.p$)(n));"addrange"===o.op?(i=i.concat(o.valuelist),n=0):"removerange"===o.op?n=o.length:"patch"===o.op&&(i.push(w(e[t],o.diff)),n=1),r=Math.max(r,t+n)}for(let t of e.slice(r))i.push((0,s.p$)(t));return i}(o.JSONExt.deepCopy(e),t);if("number"==typeof e||"boolean"==typeof e)throw new TypeError("Cannot patch an atomic type: "+typeof e);if(null===e)throw new TypeError("Cannot patch a null base!");return function(e,t){let i={},r=Object.keys(e);if(t)for(let s of t){(0,l.Gz)(e,s,r);let t=s.key;"add"===s.op?i[t]=s.value:"remove"===s.op?r.splice(r.indexOf(t),1):"replace"===s.op?(r.splice(r.indexOf(t),1),i[t]=s.value):"patch"===s.op&&(r.splice(r.indexOf(t),1),i[t]=w(e[t],s.diff))}for(let t of r)i[t]=(0,s.p$)(e[t]);return i}(o.JSONExt.deepCopy(e),t)}},9280:(e,t,i)=>{"use strict";i.d(t,{U:()=>d});var s,r=i(6697),n=i(5633),o=i(8778);class l extends o.PanelLayout{constructor(e={}){super(),this.order=null,this._wrap=!1,this._minimumSpacing=4,this._justifyContent=null,this._alignItems=null,this._alignContent=null,this._dirty=!1,this._direction="top-to-bottom",this._stretchType=null,this._evenSizes=!1,void 0!==e.direction&&(this._direction=e.direction),void 0!==e.minimumSpacing&&(this._minimumSpacing=s.clampSpacing(e.minimumSpacing)),void 0!==e.wrap&&(this._wrap=e.wrap),void 0!==e.justifyContent&&(this._justifyContent=e.justifyContent),void 0!==e.alignItems&&(this._alignItems=e.alignItems),void 0!==e.alignContent&&(this._alignContent=e.alignContent),void 0!==e.stretchType&&(this._stretchType=e.stretchType),void 0!==e.evenSizes&&(this._evenSizes=e.evenSizes)}get direction(){return this._direction}set direction(e){this._direction!==e&&(this._direction=e,this.parent&&(s.toggleDirection(this.parent,e),this.parent.fit()))}get minimumSpacing(){return this._minimumSpacing}set minimumSpacing(e){e=s.clampSpacing(e),this._minimumSpacing!==e&&(this._minimumSpacing=e,this.parent&&(this.parent.node.style.flexWrap=e?"wrap":"nowrap",this.parent.fit()))}get wrap(){return this._wrap}set wrap(e){this._wrap!==e&&(this._wrap=e,this.parent&&(this.parent.node.style.flexWrap=e?"wrap":"nowrap",this.parent.fit()))}get justifyContent(){return this._justifyContent}set justifyContent(e){if(this._justifyContent===e)return;this._justifyContent=e;let t=s.translateFlexString(e);this.parent&&(this.parent.node.style.justifyContent=t,this.parent.fit())}get alignItems(){return this._alignItems}set alignItems(e){if(this._alignItems===e)return;this._alignItems=e;let t=s.translateFlexString(e);this.parent&&(this.parent.node.style.alignItems=t,this.parent.fit())}get alignContent(){return this._alignContent}set alignContent(e){if(this._alignContent===e)return;this._alignContent=e;let t=s.translateFlexString(e);this.parent&&(this.parent.node.style.alignContent=t,!1!==this._wrap&&this.parent.fit())}get stretchType(){return this._stretchType}set stretchType(e){this._stretchType!==e&&(this._stretchType=e,this.parent&&this.parent.fit())}get evenSizes(){return this._evenSizes}set evenSizes(e){this._evenSizes!==e&&(this._evenSizes=e,this.parent&&this.parent.fit())}isHorizontal(){return"right-to-left"===this.direction||"left-to-right"===this.direction}isVertical(){return!this.isHorizontal()}init(){s.toggleDirection(this.parent,this.direction),super.init()}attachWidget(e,t){super.attachWidget(e,t),this.order&&r.ArrayExt.insert(this.order,e,t),this.parent.fit()}moveWidget(e,t,i){e!==t&&(this.order||(this.order=this.widgets.slice()),r.ArrayExt.move(this.order,e,t),this._dirty=!0),this.parent.update()}detachWidget(e,t){if(this.order){let e=0;for(;e<this.order.length;++e)if(t===this.order[e]){r.ArrayExt.removeAt(this.order,e);break}}super.detachWidget(e,t),this.parent.fit()}onAfterShow(e){super.onAfterShow(e),this.parent.update()}onAfterAttach(e){super.onAfterAttach(e),s.toggleDirection(this.parent,this._direction);let t=this.parent.node.style;t.flexWrap=this._wrap?"wrap":"nowrap",t.justifyContent=s.translateFlexString(this._justifyContent)||"",t.alignContent=s.translateFlexString(this._alignContent)||"",t.alignItems=s.translateFlexString(this._alignItems)||"",this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update()}onUpdateRequest(e){this.parent.isVisible&&this._update()}onFitRequest(e){this.parent.isAttached&&this._fit()}_fit(){this._dirty=!0;let e=this.parent.parent;e&&n.MessageLoop.sendMessage(e,o.Widget.Msg.FitRequest),this._dirty&&n.MessageLoop.sendMessage(this.parent,o.Widget.Msg.UpdateRequest)}_update(){this._dirty=!1;let e=this.order||this.widgets;if(0===e.length)return;let t=this.minimumSpacing.toString()+"px";if(this.isHorizontal())for(let i=0;i<e.length-1;++i)e[i].node.style.marginRight=t;else for(let i=0;i<e.length-1;++i)e[i].node.style.marginBottom=t;if(this._evenSizes||this.stretchType){let t=null,i=null,s=null;if(this._evenSizes)t=0,i=1;else switch(this._stretchType){case"grow":i=1,s=0;break;case"shrink":i=0,s=1;break;case"both":i=1,s=1;break;case"fixed":i=0,s=0;break;default:throw new TypeError("Invalid stretch type: "+this._stretchType)}for(let r=0;r<e.length;++r){let n=e[r].node.style;null!==t&&(n.flexBasis=t.toString()),null!==i&&(n.flexGrow=i.toString()),null!==s&&(n.flexShrink=s.toString())}}for(let t=0;t<e.length;++t)e[t].node.style.order=this.order?t.toString():""}}!function(e){e.getGrow=function(e){let t=e.node.style.flexGrow;return t?parseInt(t,10):null},e.setGrow=function(e,t,i=!0){e.node.style.flexGrow=null===t?"":t.toString(),i&&e.parent&&e.parent.fit()},e.getShrink=function(e){let t=e.node.style.flexShrink;return t?parseInt(t,10):null},e.setShrink=function(e,t,i=!0){e.node.style.flexShrink=null===t?"":t.toString(),i&&e.parent&&e.parent.fit()},e.getSizeBasis=function(e){let t=e.node.style.flexBasis;return"auto"===t?"auto":t?parseInt(t.replace("px",""),10):null},e.setSizeBasis=function(e,t,i=!0){e.node.style.flexBasis="auto"===t?t:null===t?"":t.toString()+"px",i&&e.parent&&e.parent.fit()}}(l||(l={})),function(e){e.isHorizontal=function(e){return"left-to-right"===e||"right-to-left"===e},e.translateFlexString=function(e){return"start"!==e&&"end"!==e||(e="flex-"+e),e},e.toggleDirection=function(e,t){e.toggleClass("lm-mod-left-to-right","left-to-right"===t),e.toggleClass("lm-mod-right-to-left","right-to-left"===t),e.toggleClass("lm-mod-top-to-bottom","top-to-bottom"===t),e.toggleClass("lm-mod-bottom-to-top","bottom-to-top"===t)},e.clampSpacing=function(e){return Math.max(0,Math.floor(e))}}(s||(s={}));const a="lm-FlexPanel-child";class d extends o.Panel{constructor(e={}){super({layout:c.createLayout(e)}),e.layout||(void 0!==e.minimumSpacing&&(this.minimumSpacing=e.minimumSpacing),void 0!==e.direction&&(this.direction=e.direction)),this.addClass("lm-FlexPanel")}get direction(){return this.layout.direction}set direction(e){this.layout.direction=e}get minimumSpacing(){return this.layout.minimumSpacing}set minimumSpacing(e){this.layout.minimumSpacing=e}get wrap(){return this.layout.wrap}set wrap(e){this.layout.wrap=e}get justifyContent(){return this.layout.justifyContent}set justifyContent(e){this.layout.justifyContent=e}get alignItems(){return this.layout.alignItems}set alignItems(e){this.layout.alignItems=e}get alignContent(){return this.layout.alignContent}set alignContent(e){this.layout.alignContent=e}get layout(){return super.layout}set layout(e){super.layout=e}get stretchType(){return this.layout.stretchType}set stretchType(e){this.layout.stretchType=e}get evenSizes(){return this.layout.evenSizes}set evenSizes(e){this.layout.evenSizes=e}onChildAdded(e){e.child.addClass(a)}onChildRemoved(e){e.child.removeClass(a)}onAfterAttach(e){super.onAfterAttach(e),this.fit()}}var c;!function(e){e.getGrow=function(e){return l.getGrow(e)},e.setGrow=function(e,t){l.setGrow(e,t)},e.getShrink=function(e){return l.getShrink(e)},e.setShrink=function(e,t){l.setShrink(e,t)},e.getSizeBasis=function(e){return l.getSizeBasis(e)},e.setSizeBasis=function(e,t){l.setSizeBasis(e,t)}}(d||(d={})),function(e){e.createLayout=function(e){return e.layout||new l(e)}}(c||(c={}))}}]);